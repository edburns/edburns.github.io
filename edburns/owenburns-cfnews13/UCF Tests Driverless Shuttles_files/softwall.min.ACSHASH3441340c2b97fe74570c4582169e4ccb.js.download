$(function(){ns("News").SoftWallModal={DEFAULT_PAYWALL_MSG:"This video is available exclusively to our customers",DEFAULT_PAYWALL_LOGIN_BTN:"Sign In",DEFAULT_PAYWALL_LEARN_MORE:"Learn More",DEFAULT_LEARN_MORE:" LEARN MORE",DEFAULT_NUM_FREE_VIEWS:"5",DEFAULT_OUT_OF_VIEWS:"Stay connected to your community. Log in for unlimited access to our content.",DEFAULT_SOFTWALL_MSG:"Enjoy access to five videos from our site. Log in for unlimited access.",DEFAULT_SOFTWALL_PLAY_BTN:"ASK LATER",DEFAULT_SOFTWALL_LOGIN_BTN:"SIGN IN",
DEFAULT_VIDEO_MSG:"Videos Left Until Sign-In Required",DEFAULT_VIDEO_LOGIN_BTN:"SIGN IN",videoPid:$(".platform-video-data").data("pid"),regionPageProps:"",softwallEnabled:!0,userAuthenticated:!1,init:function(a){News.SoftWallModal.setSoftOrPayWallDiv();this.userAuthenticated=a;a||(a=this.authType(),""!==a&&"open"!==a&&"openMode"!==a&&($(".overlay-close").click(function(){$(".overlay").toggle()}),News.SoftWallModal.setModalSpectrumIcon()),"limited"===a||"limitedFreeViews"===a?News.SoftWallModal.setSoftwall():
News.SoftWallModal.setPaywall(),News.SoftWallModal.setLogInURL())},authType:function(){var a;$.ajax({url:"/services/api/videos/v1/lookup",async:!1,headers:{"Lookup-Pids":News.SoftWallModal.videoPid}}).done(function(b){a=0<b.videos.length?b.videos[0].authentication:$(".platform-video-data").data("analytics-authtype")});return a},setModalSpectrumIcon:function(){var a,b;(a=$(".navbar-chip-logo").attr("class"))?$.each(a.toString().split(" "),function(a,d){d.startsWith("icon")&&(b=d+"_blue")}):(a=$(".header_logo__icon").attr("class"))?
$.each(a.toString().split(" "),function(a,d){d.startsWith("icon")&&(b=d)}):b="icon-SpectrumLogo_blue";$(".platform-icon").addClass(b)},setSoftOrPayWallDiv:function(){var a=News.SoftWallModal.authType(),b=$("#paywallModal .platform-video-login"),c=$("#bitmovin-video-player"),d=$('\x3cdiv class\x3d"platform-video-play text-center"\x3e\x3ca id\x3d"watch-free-video" href\x3d"#" class\x3d"btn btn-platform btn-hollow" target\x3d"_self"\x3e\x3c/a\x3e\x3c/div\x3e'),e=$('\x3cdiv id\x3d"learn-more-button" class\x3d"platform-video-lm"\x3e\x3ca href\x3d"" class\x3d"btn btn-lm btn-hollow" target\x3d"_self"\x3e\x3c/a\x3e\x3c/div\x3e'),
f=$('\x3cdiv class\x3d"softwall hidden"\x3e\x3cdiv\x3e\x3cp\x3e\x3cspan id\x3d"viewsRemaining"\x3e0\x3c/span\x3e \x3cspan id\x3d"viewsRemainingText"\x3e\x3c/span\x3e\x3c/p\x3e\x3ca id\x3d"videoLoginButton" href\x3d"#" class\x3d"platform-video-login"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');"limited"===a||"limitedFreeViews"===a?(b.after(d),c.append(f)):"loginRequired"!==a&&"closed"!==a||b.after(e)},checkUserViews:function(){var a=News.SoftWallModal.getNumberOfRemainingViews();0<a?$("#viewsRemaining").html(a):
($("#viewsRemaining").html("0"),$("#no-views-message").removeClass("hidden"),$("#paywallMsg").toggle(),$("#learn-more-button").removeClass("hidden"),$("#watch-free-video").toggle())},getNumberOfRemainingViews:function(){var a=Cookies.get("videoplayercookie"),b=News.SoftWallModal.getAllowedViews();a&&(b=JSON.parse(a).playerViews);return b},softwallAlreadyActive:function(){var a=News.SoftWallModal.getAllowedViews(),b=News.SoftWallModal.getNumberOfRemainingViews();return a>b&&0<b?(News.SoftWallModal.enableVideoControls(),
!0):!1},setDefaultSoftwallMessages:function(){var a=$(".region-data").data("organization-name")||"Spectrum";News.SoftWallModal.DEFAULT_OUT_OF_VIEWS="Stay connected to your community. Log in for unlimited access to "+a+" content.";News.SoftWallModal.DEFAULT_SOFTWALL_MSG="Enjoy access to five videos from "+a+". Log in for unlimited access."},setUsrCookie:function(){var a=News.SoftWallModal.getUsrCookie(),b=News.SoftWallModal.getAllowedViews();if(void 0!=a){var c=JSON.parse(a);var d=c.playerViews;var e=
new Date(c.softwallDate);c=c.initialViews;c<b&&(d+=b-c,c=b)}else e=new Date,d=b,e=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59),c=b;a=void 0!=a?JSON.parse(a):{};a.softwallDate=e;a.initialViews=c;a.playerViews=parseInt(d)-1;Cookies.set("videoplayercookie",JSON.stringify(a),{expires:e,path:"/"})},getUsrCookie:function(){return Cookies.get("videoplayercookie")},getAllowedViews:function(){return $("#paywallModal").attr("data-allowedviews")},enableVideoControls:function(){$("div.playerBlocker").remove();
$("#bitmovin-video-player :button").css("pointer-events","auto");$("#bitmovin-video-player").find(".bmpui-ui-controlbar").show();$(".bmpui-ui-hugeplaybacktogglebutton").find(".bmpui-image").click()},showModal:function(){this.userAuthenticated||"undefined"===typeof News.SoftWallModal.softwallEnabled?News.SoftWallModal.enableVideoControls():News.SoftWallModal.softwallAlreadyActive()?(News.SoftWallModal.setUsrCookie(),News.SoftWallModal.checkUserViews()):$(".overlay").toggle()},setSoftwall:function(){News.SoftWallModal.setDefaultSoftwallMessages();
var a=$(".region-data"),b=a.data("softwallwelcome")||News.SoftWallModal.DEFAULT_SOFTWALL_MSG,c=a.data("videowelcome")||News.SoftWallModal.DEFAULT_VIDEO_MSG,d=a.data("videologinbutton")||News.SoftWallModal.DEFAULT_VIDEO_LOGIN_BTN,e=a.data("numofviews")||News.SoftWallModal.DEFAULT_NUM_FREE_VIEWS,f=a.data("softwallloginbutton")||News.SoftWallModal.DEFAULT_SOFTWALL_LOGIN_BTN,g=a.data("softwallplaybutton")||News.SoftWallModal.DEFAULT_SOFTWALL_PLAY_BTN;a=a.data("outoffreeviews")||News.SoftWallModal.DEFAULT_OUT_OF_VIEWS;
$("#paywallModal").attr("data-allowedviews",e);$("#paywallMsg").html(b);$("#watch-free-video").html(g);$("#softwall-login-button").html(f);$("#no-views-message").html(a);$("#videoLoginButton").html(d);$("#viewsRemainingText").html(c);$("#paywall-login-button").css("display","none");$("#watch-free-video").click(function(){$(".overlay").toggle();$(".softwall").removeClass("hidden");$(".bitmovinplayer-container").addClass("sftwl-enabled");News.SoftWallModal.enableVideoControls();News.SoftWallModal.setUsrCookie();
News.SoftWallModal.checkUserViews()});void 0!==News.SoftWallModal.getUsrCookie()&&($(".softwall").removeClass("hidden"),$("#bitmovin-video-player").addClass("sftwl-enabled"));News.SoftWallModal.checkUserViews()},setLogInURL:function(){var a=$("#login-button").attr("href");$("#softwall-login-button").attr("href",a);$(".softwall a.platform-video-login").attr("href",a);$("#paywall-login-button").attr("href",a)},setPaywall:function(){var a=$(".region-data"),b=a.data("paywallmessage")||News.SoftWallModal.DEFAULT_PAYWALL_MSG;
$("#paywallMsg").html(b);b=a.data("paywallloginbutton")||News.SoftWallModal.DEFAULT_PAYWALL_LOGIN_BTN;$("#paywall-login-button").html(b);$("#softwall-login-button").css("display","none");b=a.data("paywalllearnmore")||News.SoftWallModal.DEFAULT_PAYWALL_LEARN_MORE;a=a.data("paywalllearnmoreurl")||"";var c=$("#learn-more-button a");c.attr("href",a);c.html(b)}}});