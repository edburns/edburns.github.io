/*! @name videojs-overlay @version 3.0.0 @license Apache-2.0 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).videojsOverlay=e(t.videojs)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=e(t);const i={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},n=s.default.getComponent("Component"),o=s.default.dom||s.default,r=s.default.registerPlugin||s.default.plugin,h=t=>"number"==typeof t&&t==t,a=t=>"string"==typeof t&&/^\S+$/.test(t);class d extends n{constructor(t,e){super(t,e),["start","end"].forEach((t=>{const e=this.options_[t];if(h(e))this[t+"Event_"]="timeupdate";else if(a(e))this[t+"Event_"]=e;else if("start"===t)throw new Error('invalid "start" option; expected number or string')})),["endListener_","rewindListener_","startListener_"].forEach((t=>{this[t]=e=>d.prototype[t].call(this,e)})),"timeupdate"===this.startEvent_&&this.on(t,"timeupdate",this.rewindListener_),this.debug(`created, listening to "${this.startEvent_}" for "start" and "${this.endEvent_||"nothing"}" for "end"`),this.hide()}createEl(){const t=this.options_,e=t.content,s=t.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",i=o.createEl("div",{className:`\n        vjs-overlay\n        vjs-overlay-${t.align}\n        ${t.class}\n        ${s}\n        vjs-hidden\n      `});return"string"==typeof e?i.innerHTML=e:e instanceof window.DocumentFragment?i.appendChild(e):o.appendContent(i,e),i}debug(...t){if(!this.options_.debug)return;const e=s.default.log;let i=e;e.hasOwnProperty(t[0])&&"function"==typeof e[t[0]]&&(i=e[t.shift()]),i(`overlay#${this.id()}: `,...t)}hide(){return super.hide(),this.debug("hidden"),this.debug(`bound \`startListener_\` to "${this.startEvent_}"`),this.endEvent_&&(this.debug(`unbound \`endListener_\` from "${this.endEvent_}"`),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this}shouldHide_(t,e){const s=this.options_.end;return h(s)?t>=s:s===e}show(){return super.show(),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug(`unbound \`startListener_\` from "${this.startEvent_}"`),this.endEvent_&&(this.debug(`bound \`endListener_\` to "${this.endEvent_}"`),this.on(this.player(),this.endEvent_,this.endListener_)),this}shouldShow_(t,e){const s=this.options_.start,i=this.options_.end;return h(s)?h(i)?t>=s&&t<i:this.hasShownSinceSeek_?Math.floor(t)===s:(this.hasShownSinceSeek_=!0,t>=s):s===e}startListener_(t){const e=this.player().currentTime();this.shouldShow_(e,t.type)&&this.show()}endListener_(t){const e=this.player().currentTime();this.shouldHide_(e,t.type)&&this.hide()}rewindListener_(t){const e=this.player().currentTime(),s=this.previousTime_,i=this.options_.start,n=this.options_.end;e<s&&(this.debug("rewind detected"),h(n)&&!this.shouldShow_(e)?(this.debug(`hiding; ${n} is an integer and overlay should not show at this time`),this.hasShownSinceSeek_=!1,this.hide()):a(n)&&e<i&&(this.debug(`hiding; show point (${i}) is before now (${e}) and end point (${n}) is an event`),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=e}}s.default.registerComponent("Overlay",d);const l=function(t){const e=s.default.mergeOptions(i,t);Array.isArray(this.overlays_)&&this.overlays_.forEach((t=>{this.removeChild(t),this.controlBar&&this.controlBar.removeChild(t),t.dispose()}));const n=e.overlays;delete e.overlays,this.overlays_=n.map((t=>{const i=s.default.mergeOptions(e,t),n="string"==typeof i.attachToControlBar||!0===i.attachToControlBar;if(!this.controls()||!this.controlBar)return this.addChild("overlay",i);if(n&&-1!==i.align.indexOf("bottom")){let t=this.controlBar.children()[0];if(void 0!==this.controlBar.getChild(i.attachToControlBar)&&(t=this.controlBar.getChild(i.attachToControlBar)),t){const e=this.controlBar.children().indexOf(t);return this.controlBar.addChild("overlay",i,e)}}const o=this.addChild("overlay",i);return this.el().insertBefore(o.el(),this.controlBar.el()),o}))};return l.VERSION="3.0.0",r("overlay",l),l}));
