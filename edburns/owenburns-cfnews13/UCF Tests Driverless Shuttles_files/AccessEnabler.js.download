var Adobe=AccessEnabler=function(s){function e(e){for(var t,n,o=e[0],r=e[1],i=0,a=[];i<o.length;i++)n=o[i],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&a.push(u[n][0]),u[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t]);for(c&&c(e);a.length;)a.shift()()}var n={},u={0:0};function l(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(r){var e,i,a,t,s,n,o=[],c=u[r];return 0!==c&&(c?o.push(c[2]):(e=new Promise(function(e,t){c=u[r]=[e,t]}),o.push(c[2]=e),(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.src=l.p+""+({}[n=r]||n)+".js",a=new Error,t=function(e){i.onerror=i.onload=null,clearTimeout(s);var t,n,o=u[r];0!==o&&(o&&(t=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,a.message="Loading chunk "+r+" failed.\n("+t+": "+n+")",a.name="ChunkLoadError",a.type=t,a.request=n,o[1](a)),u[r]=void 0)},s=setTimeout(function(){t({type:"timeout",target:i})},12e4),i.onerror=i.onload=t,document.head.appendChild(i))),Promise.all(o)},l.m=s,l.c=n,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e},l.h="d13ce57fb92f48d220d6",l.cn="AccessEnabler";var t=window.webpackJsonpAdobe_AccessEnabler=window.webpackJsonpAdobe_AccessEnabler||[],o=t.push.bind(t);t.push=e,t=t.slice();for(var r=0;r<t.length;r++)e(t[r]);var c=o;return l(l.s=15)}([function(e,t,n){"use strict";var o,r;(o={})[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT",(r={}).INTERNAL="[INTERNAL]",r.PREAUTHORIZATION="[PREAUTHORIZE]",r.LOGOUT="[LOGOUT]";var i=(a.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},a.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},a.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},a.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},a.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},a.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},a.prototype.setLevel=function(e){this.level=e,this.bindConsoleLog()},a.prototype.setPrefix=function(e){this.prefix="["+e+"]",this.bindConsoleLog()},a.prototype.bindConsoleLog=function(){if(console)for(var e in console){var t;console.hasOwnProperty(e)&&(t="function"==typeof console[e],this.logMethods.indexOf(e)>=this.level?this[e]=console[t?e:"log"].bind(window.console,this.prefix+"["+e.toString()+"]"):this[e]=function(){})}},a);function a(){this.level=2,this.prefix="",this.logMethods=["trace","debug","info","warn","error"],this.bindConsoleLog()}t.a=new i},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=(r.SESSION_COOKIE_NAME="ap_93",r.PENDING_AUTHENTICATION_COOKIE_NAME="pend_authn",r);function r(){}var i=(a.setSessionCookie=function(){document.cookie=o.SESSION_COOKIE_NAME+"="+(new Date).getTime()+";path=/"},a.isSessionCookieSet=function(){return-1!==document.cookie.indexOf(o.SESSION_COOKIE_NAME)},a.setPendingAuthenticationCookieState=function(e){document.cookie=!0===e?o.PENDING_AUTHENTICATION_COOKIE_NAME+"= ;expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/":o.PENDING_AUTHENTICATION_COOKIE_NAME+"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"},a.isPendingAuthenticationCookieSet=function(){return-1!==document.cookie.indexOf(o.PENDING_AUTHENTICATION_COOKIE_NAME)},a);function a(){}},function(e,t,o){"use strict";(function(a){var g=o(8),p=o(9),s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,t=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function T(e){return(e||"").toString().replace(t,"")}var f=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function A(e){var t,n="undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{},o=n.location||{},r={},i=typeof(e=e||o);if("blob:"===e.protocol)r=new I(unescape(e.pathname),{});else if("string"==i)for(t in r=new I(e,{}),c)delete r[t];else if("object"==i){for(t in e)t in c||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=s.test(e.href))}return r}function E(e){e=T(e);var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function I(e,t,n){if(e=T(e),!(this instanceof I))return new I(e,t,n);var o,r,i,a,s,c,u=f.slice(),l=typeof t,d=this,h=0;for("object"!=l&&"string"!=l&&(n=t,t=null),n&&"function"!=typeof n&&(n=p.parse),t=A(t),o=!(r=E(e||"")).protocol&&!r.slashes,d.slashes=r.slashes||o&&t.slashes,d.protocol=r.protocol||t.protocol||"",e=r.rest,r.slashes||(u[3]=[/(.*)/,"pathname"]);h<u.length;h++)"function"!=typeof(a=u[h])?(i=a[0],c=a[1],i!=i?d[c]=e:"string"==typeof i?~(s=e.indexOf(i))&&(e="number"==typeof a[2]?(d[c]=e.slice(0,s),e.slice(s+a[2])):(d[c]=e.slice(s),e.slice(0,s))):(s=i.exec(e))&&(d[c]=s[1],e=e.slice(0,s.index)),d[c]=d[c]||o&&a[3]&&t[c]||"",a[4]&&(d[c]=d[c].toLowerCase())):e=a(e);n&&(d.query=n(d.query)),o&&t.slashes&&"/"!==d.pathname.charAt(0)&&(""!==d.pathname||""!==t.pathname)&&(d.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=n.length,r=n[o-1],i=!1,a=0;o--;)"."===n[o]?n.splice(o,1):".."===n[o]?(n.splice(o,1),a++):a&&(0===o&&(i=!0),n.splice(o,1),a--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(d.pathname,t.pathname)),g(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.split(":"),d.username=a[0]||"",d.password=a[1]||""),d.origin=d.protocol&&d.host&&"file:"!==d.protocol?d.protocol+"//"+d.host:"null",d.href=d.toString()}I.prototype={set:function(e,t,n){var o,r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||p.parse)(t)),r[e]=t;break;case"port":r[e]=t,g(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":t?(o="pathname"===e?"/":"#",r[e]=t.charAt(0)!==o?o+t:t):r[e]=t;break;default:r[e]=t}for(var i=0;i<f.length;i++){var a=f[i];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=p.stringify);var t,n=this,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var r=o+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},I.extractProtocol=E,I.location=A,I.trimLeft=T,I.qs=p,e.exports=I}).call(this,o(4))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var c=n(0),u=n(1),l="c.a.p.pm.",o=(r.prototype.postMessage=function(e){this.target.postMessage(e,this.url.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},r.prototype.postStorage=function(o){for(var r=this,i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return new Promise(function(t){try{var n=l+"s."+r.getOpId();r.addEventListener(n,function(e){e.data.id===n&&(r.removeEventListener(e.data.id),t(e.data.result))});var e={id:n,operation:o,params:i};r.postMessage(e)}catch(e){c.a.error(e),t()}})},r.prototype.handleStorage=function(){var s=this;this.addEventListener("storage",function(e){if(e&&e.data&&e.data.id&&0===e.data.id.indexOf(l+"s.")&&e.data.operation&&e.data.params){var t={id:e.data.id},n=e.data.params;switch(e.data.operation){case"getItems":if(t.result={},s.isLocalStorageSpaceEnabled())for(var o=0,r=n;o<r.length;o++){var i=r[o],a=localStorage.getItem(i);null!==a&&(t.result[i]=a)}else t.result.error=!0,c.a.debug("Web localStorage is not available for 3rd parties for read operations");break;case"setItem":s.isLocalStorageSpaceEnabled()?2===n.length?localStorage.setItem(n[0],n[1]):c.a.error("Did not receive valid data to write!",n):c.a.debug("Web localStorage is not available for 3rd parties for write operations");break;case"isSessionCookieSet":t.result={isSessionCookieSet:u.a.isSessionCookieSet()};break;case"setSessionCookie":u.a.setSessionCookie();break;default:c.a.error("Unsupported storage operation: ",e.data.operation)}s.postMessage(t)}})},r.prototype.addEventListener=function(e,t){this.handlers[e]=t,window.addEventListener("message",t,!1)},r.prototype.removeEventListener=function(e){window.removeEventListener("message",this.handlers[e],!1),delete this.handlers[e]},r.prototype.getOpId=function(){return 1e3<r.opSeq&&(r.opSeq=0),+new Date+"."+r.opSeq++},r.prototype.isLocalStorageSpaceEnabled=function(){try{return localStorage.setItem("canWrite","test"),localStorage.removeItem("canWrite"),!0}catch(e){return!1}},r.opSeq=0,r);function r(e,t){void 0===e&&(e=null),void 0===t&&(t=parent),this.handlers={},this.url=e,this.target=t,this.handlers={}}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(N,D,e){(function(e){var P,b,t;t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this,N.exports=function(t){"use strict";var n=(t=t||{}).Base64,e="2.6.4",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){var t={};for(var n=0,o=e.length;n<o;n++)t[e.charAt(n)]=n;return t}(u),a=String.fromCharCode,o=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?a(192|t>>>6)+a(128|t&63):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|t&63)}},r=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=function(e){return e.replace(r,o)},c=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),o=[u.charAt(n>>>18),u.charAt(n>>>12&63),t>=2?"=":u.charAt(n>>>6&63),t>=1?"=":u.charAt(n&63)];return o.join("")},l=t.btoa&&typeof t.btoa=="function"?function(e){return t.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,c)},d=function(e){return l(s(String(e)))},h=function(e){return e.replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=/g,"")},g=function(e,t){return t?h(d(e)):d(e)},p=function(e){return g(e,true)},T;if(t.Uint8Array)T=function(e,t){var n="";for(var o=0,r=e.length;o<r;o+=3){var i=e[o],a=e[o+1],s=e[o+2];var c=i<<16|a<<8|s;n+=u.charAt(c>>>18)+u.charAt(c>>>12&63)+(typeof a!="undefined"?u.charAt(c>>>6&63):"=")+(typeof s!="undefined"?u.charAt(c&63):"=")}return t?h(n):n};var f=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,A=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return a((n>>>10)+55296)+a((n&1023)+56320);case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},E=function(e){return e.replace(f,A)},I=function(e){var t=e.length,n=t%4,o=(t>0?i[e.charAt(0)]<<18:0)|(t>1?i[e.charAt(1)]<<12:0)|(t>2?i[e.charAt(2)]<<6:0)|(t>3?i[e.charAt(3)]:0),r=[a(o>>>16),a(o>>>8&255),a(o&255)];r.length-=[0,0,2,1][n];return r.join("")},S=t.atob&&typeof t.atob=="function"?function(e){return t.atob(e)}:function(e){return e.replace(/\S{1,4}/g,I)},v=function(e){return S(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_=function(e){return E(S(e))},m=function(e){return String(e).replace(/[-_]/g,function(e){return e=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},R=function(e){return _(m(e))},y;if(t.Uint8Array)y=function(e){return Uint8Array.from(v(m(e)),function(e){return e.charCodeAt(0)})};var C=function(){var e=t.Base64;t.Base64=n;return e};if(t.Base64={VERSION:e,atob:v,btoa:l,fromBase64:R,toBase64:g,utob:s,encode:g,encodeURI:p,btou:E,decode:R,noConflict:C,fromUint8Array:T,toUint8Array:y},typeof Object.defineProperty==="function"){var O=function(e){return{value:e,enumerable:false,writable:true,configurable:true}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",O(function(){return R(this)}));Object.defineProperty(String.prototype,"toBase64",O(function(e){return g(this,e)}));Object.defineProperty(String.prototype,"toBase64URI",O(function(){return g(this,true)}))}}if(t["Meteor"]){Base64=t.Base64}if(true&&N.exports){N.exports.Base64=t.Base64}else if(true){!(P=[],b=function(){return t.Base64}.apply(D,P),b!==undefined&&(N.exports=b))}return{Base64:t.Base64}}(t)}).call(this,e(4))},function(e,t,n){"use strict";e.exports=function(e,t,n){if(e.forEach)e.forEach(t,n);else for(var o=0;o<e.length;o+=1)t.call(n,e[o],o,e)}},function(t,a,f){var A;!function(){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,o,r,i){return d((a=d(d(t,e),d(o,i)))<<(s=r)|a>>>32-s,n);var a,s}function h(e,t,n,o,r,i,a){return s(t&n|~t&o,e,t,r,i,a)}function g(e,t,n,o,r,i,a){return s(t&o|n&~o,e,t,r,i,a)}function p(e,t,n,o,r,i,a){return s(t^n^o,e,t,r,i,a)}function T(e,t,n,o,r,i,a){return s(n^(t|~o),e,t,r,i,a)}function c(e,t){var n,o,r,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,s=-271733879,c=-1732584194,u=271733878,l=0;l<e.length;l+=16)a=h(n=a,o=s,r=c,i=u,e[l],7,-680876936),u=h(u,a,s,c,e[l+1],12,-389564586),c=h(c,u,a,s,e[l+2],17,606105819),s=h(s,c,u,a,e[l+3],22,-1044525330),a=h(a,s,c,u,e[l+4],7,-176418897),u=h(u,a,s,c,e[l+5],12,1200080426),c=h(c,u,a,s,e[l+6],17,-1473231341),s=h(s,c,u,a,e[l+7],22,-45705983),a=h(a,s,c,u,e[l+8],7,1770035416),u=h(u,a,s,c,e[l+9],12,-1958414417),c=h(c,u,a,s,e[l+10],17,-42063),s=h(s,c,u,a,e[l+11],22,-1990404162),a=h(a,s,c,u,e[l+12],7,1804603682),u=h(u,a,s,c,e[l+13],12,-40341101),c=h(c,u,a,s,e[l+14],17,-1502002290),a=g(a,s=h(s,c,u,a,e[l+15],22,1236535329),c,u,e[l+1],5,-165796510),u=g(u,a,s,c,e[l+6],9,-1069501632),c=g(c,u,a,s,e[l+11],14,643717713),s=g(s,c,u,a,e[l],20,-373897302),a=g(a,s,c,u,e[l+5],5,-701558691),u=g(u,a,s,c,e[l+10],9,38016083),c=g(c,u,a,s,e[l+15],14,-660478335),s=g(s,c,u,a,e[l+4],20,-405537848),a=g(a,s,c,u,e[l+9],5,568446438),u=g(u,a,s,c,e[l+14],9,-1019803690),c=g(c,u,a,s,e[l+3],14,-187363961),s=g(s,c,u,a,e[l+8],20,1163531501),a=g(a,s,c,u,e[l+13],5,-1444681467),u=g(u,a,s,c,e[l+2],9,-51403784),c=g(c,u,a,s,e[l+7],14,1735328473),a=p(a,s=g(s,c,u,a,e[l+12],20,-1926607734),c,u,e[l+5],4,-378558),u=p(u,a,s,c,e[l+8],11,-2022574463),c=p(c,u,a,s,e[l+11],16,1839030562),s=p(s,c,u,a,e[l+14],23,-35309556),a=p(a,s,c,u,e[l+1],4,-1530992060),u=p(u,a,s,c,e[l+4],11,1272893353),c=p(c,u,a,s,e[l+7],16,-155497632),s=p(s,c,u,a,e[l+10],23,-1094730640),a=p(a,s,c,u,e[l+13],4,681279174),u=p(u,a,s,c,e[l],11,-358537222),c=p(c,u,a,s,e[l+3],16,-722521979),s=p(s,c,u,a,e[l+6],23,76029189),a=p(a,s,c,u,e[l+9],4,-640364487),u=p(u,a,s,c,e[l+12],11,-421815835),c=p(c,u,a,s,e[l+15],16,530742520),a=T(a,s=p(s,c,u,a,e[l+2],23,-995338651),c,u,e[l],6,-198630844),u=T(u,a,s,c,e[l+7],10,1126891415),c=T(c,u,a,s,e[l+14],15,-1416354905),s=T(s,c,u,a,e[l+5],21,-57434055),a=T(a,s,c,u,e[l+12],6,1700485571),u=T(u,a,s,c,e[l+3],10,-1894986606),c=T(c,u,a,s,e[l+10],15,-1051523),s=T(s,c,u,a,e[l+1],21,-2054922799),a=T(a,s,c,u,e[l+8],6,1873313359),u=T(u,a,s,c,e[l+15],10,-30611744),c=T(c,u,a,s,e[l+6],15,-1560198380),s=T(s,c,u,a,e[l+13],21,1309151649),a=T(a,s,c,u,e[l+4],6,-145523070),u=T(u,a,s,c,e[l+11],10,-1120210379),c=T(c,u,a,s,e[l+2],15,718787259),s=T(s,c,u,a,e[l+9],21,-343485551),a=d(a,n),s=d(s,o),c=d(c,r),u=d(u,i);return[a,s,c,u]}function u(e){for(var t="",n=32*e.length,o=0;o<n;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t}function l(e){var t=[];for(t[(e.length>>2)-1]=void 0,o=0;o<t.length;o+=1)t[o]=0;for(var n=8*e.length,o=0;o<n;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t}function o(e){for(var t,n="0123456789abcdef",o="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}function n(e){return unescape(encodeURIComponent(e))}function r(e){return u(c(l(t=n(e)),8*t.length));var t}function i(e,t){return function(e,t){var n,o,r=l(e),i=[],a=[];for(i[15]=a[15]=void 0,16<r.length&&(r=c(r,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^r[n],a[n]=1549556828^r[n];return o=c(i.concat(l(t)),512+8*t.length),u(c(a.concat(o),640))}(n(e),n(t))}function e(e,t,n){return t?n?i(t,e):o(i(t,e)):n?r(e):o(r(e))}void 0===(A=function(){return e}.call(a,f,a,t))||(t.exports=A)}()},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty;function a(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,o,r=[];for(o in"string"!=typeof t&&(t="?"),e)if(i.call(e,o)){if((n=e[o])||null!=n&&!isNaN(n)||(n=""),o=encodeURIComponent(o),n=encodeURIComponent(n),null===o||null===n)continue;r.push(o+"="+n)}return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,o={};t=n.exec(e);){var r=a(t[1]),i=a(t[2]);null===r||null===i||r in o||(o[r]=i)}return o}},,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"models",function(){return Nt}),i.d(t,"AccessEnabler",function(){return Dt});var s=(n.V1="/api/v1",n);function n(){}var c=(o.AUTHENTICATION_ENDPOINT_PATH="/authenticate/saml?",o.AUTHENTICATION_TOKEN_ENDPOINT_PATH="/session",o.AUTHORIZATION_TOKEN_ENDPOINT_PATH="/authorize",o.MEDIA_TOKEN_ENDPOINT_PATH="/shortAuthorize",o.PREAUTHORIZATION_ENDPOINT_PATH="/preauthorize",o.LOGOUT_ENDPOINT_PATH="/logout?",o.DEVICE_ID_ENDPOINT_PATH="/getMetadata",o.USER_METADATA_ENDPOINT_PATH="/usermetadata",o.CONFIG_ENDPOINT_PATH="/config",o.INDIVIDUALIZATION_ENDPOINT_PATH="/indiv/devices",o.CLIENT_REGISTRATION_ENDPOINT_PATH="/o/client/register",o.ACCESS_TOKEN_ENDPOINT_PATH="/o/client/token",o.REG_CODE_ENDPOINT_PATH="/regcode",o.PASSIVE_AUTHENTICATION_REDIRECT_ENDPOINT_PATH="/completePassiveAuthentication",o.BACKGROUND_LOGIN_COMPLETE_PATH="completeBackgroundLogin.html",o.BACKGROUND_LOGOUT_COMPLETE_PATH="completeBackgroundLogout.html",o);function o(){}var u=(r.OPEN_IFRAME_STATUS_CALLBACK="openIFrame",r.DESTROY_IFRAME_STATUS_CALLBACK="destroyIFrame",r.NAVIGATE_TO_URL_STATUS_CALLBACK="navigateToURL",r.RELOAD_STATUS_CALLBACK="reload",r.DO_BACKGROUND_LOGOUT_STATUS_CALLBACK="doBackgroundLogout",r.ACCESS_ENABLER_LIBRARY_LOADED_STATUS_CALLBACK="entitlementLoaded",r.ACCESS_ENABLER_LIBRARY_DISPLAY_PROVIDER_DIALOG_STATUS_CALLBACK="displayProviderDialog",r.CONFIGURATION_STATUS_CALLBACK="setConfig",r.AUTHENTICATION_STATUS_CALLBACK="setAuthenticationStatus",r.AUTHORIZATION_SUCCESS_STATUS_CALLBACK="setToken",r.AUTHORIZATION_FAIL_STATUS_CALLBACK="tokenRequestFailed",r.PREAUTHORIZATION_STATUS_CALLBACK="preauthorizedResources",r.METADATA_STATUS_CALLBACK="setMetadataStatus",r.SEND_SELECTED_MVPD_STATUS_CALLBACK="selectedProvider",r.SEND_SELECTED_MVPD_PROXY_STATUS_CALLBACK="proxyMVPD",r.SEND_STORAGE_DATA_STATUS_CALLBACK="storageData",r.SEND_TRACKING_DATA_STATUS_CALLBACK="sendTrackingData",r.SEND_ADVANCED_STATUS_CALLBACK="errorEvent",r);function r(){}var l=(a.SERVER_API_TOO_OLD_ERROR_STATUS="API version too old. Please update your application.",a.USER_AUTHENTICATED_STATUS="User Authenticated",a.USER_NOT_AUTHENTICATED_ERROR_STATUS="User Not Authenticated Error",a.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS="Generic Authentication Error",a.USER_NOT_AUTHORIZED_ERROR_STATUS="User not Authorized Error",a.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS="Generic Authorization Error",a.USER_NOT_AUTHORIZED_NETWORK_ERROR_STATUS='A network error occurred when communicating with the provider"s authorization service',a.PROVIDER_NOT_SELECTED_ERROR_STATUS="Provider not Selected Error",a.PROVIDER_NOT_AVAILABLE_ERROR_STATUS="Provider Not Available Error",a.PROVIDER_ALREADY_AUTHENTICATED_INFO_STATUS="You are already authenticated with this Provider",a.TRACK_AUTHORIZATION_DETECTION="authorizationDetection",a.TRACK_AUTHENTICATION_DETECTION="authenticationDetection",a.TRACK_MVPD_SELECTION="mvpdSelection",a);function a(){}var d=(h.KEY_VISITOR_ID="ap_vi",h.KEY_AD_ID="ap_ai",h);function h(){}var g=(p.prototype.execute=function(){return this.functionName.apply(this.thisArg,this.functionParameters)},p);function p(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.thisArg=e,this.functionName=t,this.functionParameters=[],n&&(this.functionParameters=Array.isArray(n)?n:[n])}var f=i(0),T=(A.addGenericEventListener=function(e,t){window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent("on"+e,t)},A.removeGenericEventListener=function(e,t){window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent("on"+e,t)},A.receiveMessageEventHandler=function(e,t){var n;!e.origin||/auth.*\.adobe\.com/.test(e.origin)?(n=t[e.data])&&n.call(this):f.a.trace("Ignoring post message from origin "+e.origin)},A.createHiddenIframe=function(e,t){var n,o=document.getElementsByTagName("iframe");if(0<o.length)for(var r=0;r<o.length;r++)if(o[r].getAttribute("name")===e){n=o[r];break}n||((n=document.createElement("iframe")).setAttribute("name",e),n.setAttribute("id",e),n.setAttribute("style","display:none"),document.body.appendChild(n)),n.setAttribute("src",t)},A.openLoginWindow=function(n,o,r){setTimeout(function(){var e,t=window.open(n,o);A.isIE()&&(f.a.warn("Internet Explorer 11 or older detected: using a timer to handle login completion..."),e=setInterval(function(){t.closed&&(f.a.debug("Login window closed"),clearInterval(e),r())},200))},150)},A.convertServerDateToISO8601DateFormat=function(e){var t=e.split(" "),n=t[0],o=t[1],r=t[3],n=n.split("/").join("-"),i=r.length-2;return n+"T"+o+(r=r.substr(0,i)+":"+r.substr(i))},A.isIE=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/),t=!(!navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/));return e||t},A.isDebug=function(e){return-1!==document.cookie.indexOf("debug")||e&&e.hasOwnProperty("query")&&e.query.hasOwnProperty("debug")},A);function A(){}var E=(I.checkPendingLogout=function(e){if("string"==typeof e)return new RegExp("<pendingLogout.*>(s)*true(s)*</pendingLogout>").test(e);var t=!1;return _.getNode("pendingLogout",e)&&"true"===_.getNodeText("pendingLogout",e)&&(t=!0),t},I.getPendingLogoutReason=function(e){var t,n=null;return"string"==typeof e?n=(n=new RegExp('<pendingLogout reason="(.*)">true</pendingLogout>').exec(e))[1]?n[1]:null:(t=_.getNode("pendingLogout",e))&&"true"===_.getNodeText("pendingLogout",e)&&(n=t.attr("reason")),n},I);function I(){}var S=(v.parseXML=function(e){return e&&"string"==typeof e?(new DOMParser).parseFromString(e,"text/xml"):null},v);function v(){}var _=(m.getNodeText=function(e,t){return this._getNode(e,t,"textContent")},m.getNode=function(e,t){return this._getNode(e,t)},m.getNodes=function(e,t){return this._getNode(e,t,void 0,!0)},m.appendChild=function(e){"interactive"===document.readyState||"complete"===document.readyState?document.body.appendChild(e):(this.createDOMContentLoadedListener(),this.elementsToBeAppended.push(e))},m.createDOMContentLoadedListener=function(){var e,t=this;this.DOMContentLoadedListenerCreated||(this.DOMContentLoadedListenerCreated=!0,e=function(){for(;0<t.elementsToBeAppended.length;)document.body.appendChild(t.elementsToBeAppended.pop());document.removeEventListener?document.removeEventListener("DOMContentLoaded",e,!1):document.detachEvent("onDOMContentLoaded",e)},document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):document.attachEvent("onDOMContentLoaded",e))},m._getNode=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),t){var r=t.getElementsByTagName(e);if(0<r.length)return o?r:n?r[0][n]:r[0]}return""},m.elementsToBeAppended=[],m.DOMContentLoadedListenerCreated=!1,m);function m(){}function R(){this.r20=/%20/g,this.class2type={},this.rbracket=/\[\]$/,this.toString=this.class2type.toString}var y=new(R.prototype.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?this.class2type[this.toString.call(e)]||"object":typeof e},R.prototype.isFunction=function(e){return"function"===this.type(e)},R.prototype.buildParams=function(e,t,n){var o,r,i;if(Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&(i=t[r],this.rbracket.test(e)?n(e,i):this.buildParams(e+"["+("object"==typeof i?r:"")+"]",i,n));else if("object"===this.type(t))for(o in t)t.hasOwnProperty(o)&&this.buildParams(e+"["+o+"]",t[o],n);else n(e,t)},R),C=(O.param=function(e,t){var n,o;function r(e,t){t=y.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}void 0===t&&(t=!1);var i=[];if(Array.isArray(e))for(o in e)e.hasOwnProperty(o)&&r(o,e[o]);else for(n in e)e.hasOwnProperty(n)&&y.buildParams(n,e[n],r);var a=i.join("&").replace(y.r20,"+");return t&&(a=a.replace(/%5B%5D/g,"")),a},O);function O(){}var P=(b.get=function(){var e=this.findScript(document.getElementsByTagName("script"));return!e&&window.$&&(e=this.findScript($("script"))),(e=e||this.findUsingStackTraces())&&0<e.length?e:this.DEFAULT_SCRIPT_URL},b.findScript=function(e){for(var t,n=new RegExp("(.*)AccessEnabler.js(.*)"),o=0,r=e;o<r.length;o++){var i=r[o];if(i.src&&i.src.match(n)){t=i.src;break}}return t},b.findUsingStackTraces=function(){function t(e,t){n=t}var n,o="stack",r=o+"trace";try{throw new Error}catch(e){return"AccessEnabler.js"in e?n=e["AccessEnabler.js"]:r in e?e[r].replace(/called from line \d+, column \d+ in (.*):/gm,t):o in e&&e[o].replace(/at.*?\(?(\S+):\d+:\d+\)?$/g,t),n}},b.DEFAULT_SCRIPT_URL="https://entitlement.auth.adobe.com/entitlement/AccessEnabler.js",b);function b(){}var N=(D.extend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1;n<e.length;n++)for(var o in e[n])e[n].hasOwnProperty(o)&&(e[0][o]=e[n][o]);return e[0]},D.isEmpty=function(e){if(!e||D.isUndefined(e)||null===e)return!0;if(e.length)return!e.length;if(e.size)return!e.size;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},D.isUndefined=function(e){return void 0===e},D.inArray=function(e,t){if(t.indexOf)return t.indexOf(e);for(var n in t)if(t[n]===e)return n;return-1},D);function D(){}var x=i(6),k=(M.prototype.getMvpds=function(){var o=this;return this.mvpds||(this.mvpds=[],x(_.getNodes(this.MVPD,this.config),function(e){var t=_.getNodeText(o.MVPD_ID,e),n={id:t,displayName:o.extractMvpdConfig(o.MVPD_DISPLAY_NAME,t,e,!1),logoUrl:o.extractMvpdConfig(o.MVPD_LOGO_URL,t,e,!1),authPerAggregator:o.extractMvpdConfig(o.MVPD_AUTH_PER_AGGREGATOR,t,e,!0),passiveAuthnEnabled:o.extractMvpdConfig(o.MVPD_PASSIVE_AUTHN,t,e,!0,!0),authPerBrowserSession:o.extractMvpdConfig(o.MVPD_AUTH_PER_BROWER_SESSION,t,e,!0),iFrameRequired:o.extractMvpdConfig(o.MVPD_IFRAME_REQUIRED,t,e,!0),tempPass:_.getNodeText(o.TEMP_PASS,e).toLowerCase()===o.TRUE};n.iFrameRequired&&(n.iFrameHeight=o.extractMvpdConfig(o.MVPD_IFRAME_HEIGHT,t,e,!1),n.iFrameWidth=o.extractMvpdConfig(o.MVPD_IFRAME_WIDTH,t,e,!1)),o.mvpds.push(n)})),this.mvpds},M.prototype.getConfigForProgrammer=function(){var t=null;if(this.config&&this.config.documentElement){var n=this.config.documentElement.cloneNode(!0);if(this.removeNonVisibleNode(n))if(void 0!==window.XMLSerializer)try{t=(new XMLSerializer).serializeToString(n)}catch(e){t=n.xml}else t=n.xml}return t},M.prototype.removeNonVisibleNode=function(e){var t=!1;return e.getAttribute(this.ATTR_VISIBLE)===this.VISIBLE_TRUE?(e.removeAttribute(this.ATTR_VISIBLE),t=!0):e.hasChildNodes()&&(t=this.removeNonVisibleChildNodes(e))&&this.removeAttributes(e),t},M.prototype.removeNonVisibleChildNodes=function(e){for(var t=!1,n=e.childNodes,o=0;o<n.length;o++){var r=n[o];1===r.nodeType&&(this.removeNonVisibleNode(r)?t=!0:(e.removeChild(r),o--))}return t},M.prototype.removeAttributes=function(e){for(var t=e.attributes.length-1;0<=t;t--){var n=e.attributes.item(t);e.removeAttributeNode(n)}},M.prototype.extractMvpdConfig=function(e,t,n,o,r){void 0===r&&(r=null);var i,a=Ot.context.clientInfo&&Ot.context.clientInfo.getMvpdConfig()?Ot.context.clientInfo.getMvpdConfig():{},s=null!==a[t]&&void 0!==a[t]&&null!==a[t][e]&&void 0!==a[t][e],c=_.getNode(e,n);return s?(i=a[t][e],c&&(c.textContent=i),i):null!=(i=_.getNodeText(e,n))&&""!==i||void 0===r?o?i===this.TRUE:i:r},M);function M(e){this.TRUE="true",this.ATTR_VISIBLE="visible",this.VISIBLE_TRUE="true",this.MVPD="mvpd",this.MVPD_ID="id",this.MVPD_LOGO_URL="logoUrl",this.MVPD_DISPLAY_NAME="displayName",this.MVPD_AUTH_PER_AGGREGATOR="authPerAggregator",this.MVPD_PASSIVE_AUTHN="passiveAuthnEnabled",this.MVPD_AUTH_PER_BROWER_SESSION="authPerBrowserSession",this.MVPD_IFRAME_REQUIRED="iFrameRequired",this.MVPD_IFRAME_HEIGHT="iFrameHeight",this.MVPD_IFRAME_WIDTH="iFrameWidth",this.TEMP_PASS="tempPass",this.mvpds=null,this.config=e}var U="warning",L="error",w="info",H=(z.Z500=function(e){return{errorId:"Z500",level:L,resource:e}},z.Z010=function(e){return{errorId:"Z010",level:U,resource:e}},z.Z011=function(e){return{errorId:"Z011",level:w,resource:e}},z.Z100=function(e,t){return{errorId:"Z100",level:L,message:e,resource:t}},z.Z110=function(e,t){return{errorId:"Z110",level:L,message:e,resource:t}},z.Z120=function(e){return{errorId:"Z120",level:L,message:"network error",resource:e}},z.Z130=function(e,t){return{errorId:"Z130",level:L,message:""===e?"invalid resource":e,resource:t}},z.Z169=function(e,t){return{errorId:"Z169",level:L,message:e,resource:t}},z.IS2XX=function(e,t){return{errorId:e,level:L,message:t}},z.buildError=function(e,t,n,o,r){return void 0===t&&(t=L),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r={}),r.level=t,n&&(r.message=n),o&&(r.subErrorId=o),N.extend({errorId:e},r)},z.fromAuthzErrorResponse=function(e,t){if("code"in e&&"message"in e)f.a.warn("Received a non xhr object!"),i=e;else{if(!e.responseText)return z.Z120(t);var n=e.responseText.split("details")[1];n&&2<n.length&&(n=n.substring(1,n.length-2));var o=e.getResponseHeader("Authzf-error-code"),r=e.getResponseHeader("Authzf-sub-error-code"),i=r&&"1010"===r?{code:l.USER_NOT_AUTHORIZED_ERROR_STATUS,subErrorCode:r,message:n}:{code:l.USER_NOT_AUTHORIZED_ERROR_STATUS,shortErrorCode:o,message:n}}if("authzNone"===i.shortErrorCode)return z.Z169(i.message,t);if("invalid"===i.shortErrorCode)return z.Z130(i.message,t);if("1010"===i.subErrorCode)return z.Z110(i.message,t);switch(i.code){case l.USER_NOT_AUTHORIZED_ERROR_STATUS:switch(i.message){case l.USER_NOT_AUTHORIZED_NETWORK_ERROR_STATUS:return z.Z120(t);default:return z.Z100(i.message,t)}case l.USER_NOT_AUTHENTICATED_ERROR_STATUS:return z.N000;default:return z.Z500(t)}},z.getReasonFromErrorResponse=function(e){var t,n=null,o="<reason>",r=e.indexOf(o);return 0<=r&&0<=(t=e.indexOf("</reason>"))&&(n=e.substring(r+o.length,t)),n},z.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS="MISSING_REQUIRED_PREREQUISITES",z.PREFIX_IS="IS",z.PREFIX_CFG="CFG",z.SEC420={errorId:"SEC420",level:L},z.SEC412={errorId:"SEC412",level:U},z.CFG100={errorId:"CFG100",level:U,message:"incorrect time"},z.R400={errorId:"R400",level:L,message:"application is not registered"},z.R401={errorId:"R401",level:L,message:"error fetching access token"},z.REG500={errorId:"REG500",level:L,message:"error fetching registration code"},z.N000={errorId:"N000",level:w,message:"user not authenticated"},z.N010={errorId:"N010",level:U},z.N011={errorId:"N011",level:w,message:"authenticated with temp pass"},z.N111={errorId:"N111",level:U},z.N005={errorId:"N005",level:w,message:"authentication cancelled"},z.N001={errorId:"N001",level:w,message:"passive authentication"},z.N404={errorId:"N404",level:L,message:"resource unavailable"},z.N002={errorId:"N002",level:L,message:"passive authentication not supported"},z.N500={errorId:"N500",level:L},z.N130={errorId:"N130",level:L},z.LS011={errorId:"LS011",level:U,message:"using volatile storage"},z.P100={errorId:"P100",level:L},z);function z(){}var G=(F.prototype.getAuthorizedResourceID=function(){return this.xmlElement?this.xmlElement.getAttribute("simpleResourceID"):null},F);function F(e){this.xmlElement=e}var K=(V.prototype.getSource=function(){return this.source},V.prototype.getExpiryDate=function(){if(o=this.getProperty("simpleTokenExpires"))o=new Date(T.convertServerDateToISO8601DateFormat(o));else{var e=void 0,t=this.getProperty("issueTime");if(t){e=this.getProperty("ttl");var n=new Date(T.convertServerDateToISO8601DateFormat(t)).getTime(),o=new Date(n+e)}else{if(!(e=this.getProperty("simpleTokenTTL")))throw{message:"Invalid token format."};o=new Date(T.convertServerDateToISO8601DateFormat(e))}}return o},V.prototype.isExpired=function(){try{return this.getExpiryDate().getTime()<(new Date).getTime()}catch(e){return f.a.error(e.message),!1}},V.prototype.isValid=function(){try{var e=!this.isExpired();return e&&this.isAuthZAll()&&(e=Ot.context.requestorId===this.getRequestorID()),e}catch(e){return f.a.error(e.message),!1}},V.prototype.isValidAuthZAll=function(){try{if(this.isAuthZAll())return Ot.context.requestorId===this.getRequestorID()}catch(e){return f.a.error("[INTERNAL] "+e.message),!1}return!0},V.prototype.isAuthNAll=function(){var e=this.getProperty("simpleTokenAuthenticationGuid");return"d35b501e0385360feccc755c59f5767b46c54c7d"===e||0===e.indexOf("95cf93bcd183214a")},V.prototype.isAuthZAll=function(){return"true"===this.getProperty("zAll")},V.prototype.getProperty=function(e){return _.getNodeText(e,this.xmlData)},V.prototype.getRequestorID=function(){return this.getProperty("simpleTokenRequestorID")},V.prototype.getResourceID=function(){var e=this.getProperty("simpleTokenResourceID");return e||this.getProperty("resourceID")},V.prototype.getMvpdID=function(){return this.getProperty("simpleTokenMsoID")},V.prototype.getSubMVPDID=function(){return this.getProperty("simpleTokenSubMvpdID")},V.prototype.getAuthorizedResources=function(){f.a.trace("Entered - Token::getAuthorizedResources()");var e=new Array(0);if(this.xmlData)for(var t=this.xmlData.getElementsByTagName("simpleAuthorizedResource"),e=new Array(t.length),n=0;n<e.length;n++){var o=new G(t[n]);e[n]=o}return e},V);function V(e){this.source=e,this.xmlData=S.parseXML(e.split("<signatureInfo>")[2])}var B=(q.prototype.setItem=function(e,t){this.memoryStorageContent[e]=t},q.prototype.getItem=function(e){return this.memoryStorageContent[e]},q.prototype.removeItem=function(e){delete this.memoryStorageContent[e]},q);function q(){this.memoryStorageContent={}}var j=(Y.AUTHN_TOKEN="authenticationToken",Y.AUTHZ_TOKEN="authorizationToken",Y.USER_METADATA="userMeta",Y.MVPD="mvpd",Y.MVPD_SELECTION="mvpdSelection",Y.CAN_AUTHN="canAuthenticate",Y.PREAUTHORIZATION_CACHE="preauthorizationCache",Y);function Y(){}var Z=(Q.UNKNOWN_SELECTION="unknown",Q.USER_SELECTION="user",Q.REMEMBERED_SELECTION="remembered",Q.AUTO_SELECTION="auto-client",Q);function Q(){}var J=(W.prototype.setAuthenticationTokens=function(e){this.authenticationToken=e},W.prototype.getAuthenticationTokens=function(){return this.authenticationToken},W.prototype.setAuthorizationTokens=function(e){this.authorizationToken=e},W.prototype.getAuthorizationTokens=function(){return this.authorizationToken},W.prototype.setUserMetadata=function(e){this.userMeta=e},W.prototype.getUserMetadata=function(){return this.userMeta},W.prototype.setMvpdID=function(e){this.mvpd=e},W.prototype.getMvpdID=function(){return this.mvpd},W.prototype.setMvpdSelection=function(e){this.mvpdSelection=e},W.prototype.getMvpdSelection=function(){return this.mvpdSelection},W.prototype.setCanAuthenticate=function(e){this.canAuthenticate=e},W.prototype.getCanAuthenticate=function(){return this.canAuthenticate},W.prototype.setPreauthorizationCache=function(e){this.preauthorizationCache=e},W.prototype.getPreauthorizationCache=function(){return this.preauthorizationCache},W.prototype.loadEntitlementTokenFromJSONObject=function(e){this.authenticationToken=e[j.AUTHN_TOKEN],this.authorizationToken=e[j.AUTHZ_TOKEN],this.userMeta=e[j.USER_METADATA],this.mvpd=e[j.MVPD],this.canAuthenticate=e[j.CAN_AUTHN],this.preauthorizationCache=e[j.PREAUTHORIZATION_CACHE],e[j.MVPD_SELECTION]?this.mvpdSelection=e[j.MVPD_SELECTION]:this.mvpd?this.mvpdSelection=Z.USER_SELECTION:this.mvpdSelection=Z.UNKNOWN_SELECTION},W.prototype.isEntitlementTokenContentValid=function(){return this&&!N.isUndefined(this.authenticationToken)&&!N.isUndefined(this.authorizationToken)&&!N.isUndefined(this.mvpd)&&!N.isUndefined(this.mvpdSelection)&&!N.isUndefined(this.canAuthenticate)&&Array.isArray(this.authenticationToken)&&Array.isArray(this.authorizationToken)},W);function W(){this.authenticationToken=[],this.authorizationToken=[],this.userMeta={},this.mvpd=null,this.mvpdSelection=Z.UNKNOWN_SELECTION,this.canAuthenticate=!1,this.preauthorizationCache=[]}var X=i(1),ee=(te.getInstance=function(){return this.instance||(this.instance=new te),this.instance},te.prototype.setRequestorMVPDs=function(e){if(e&&0<e.length){this.mvpds=e,this.mvpdsLookUpTable={};for(var t=0,n=this.mvpds;t<n.length;t++){var o=n[t];this.mvpdsLookUpTable[o.id]=o}}},te.prototype.getRequestorMVPDs=function(){return this.mvpds},te.prototype.setCurrentMvpdID=function(e){this.switchToCurrentMvpdStorageType(e),this.storageManager.clearStorage(e!==this.getCurrentMvpdID()),this.storageManager.setMvpdID(e)},te.prototype.getCurrentMvpdID=function(){return this.storageManager.getMvpdID()},te.prototype.getMvpdByID=function(e){return this.mvpdsLookUpTable.hasOwnProperty(e)?this.mvpdsLookUpTable[e]:null},te.prototype.isMvpdValid=function(e){var t=this.getMvpdByID(e);return!!t&&t.id===e},te.prototype.switchToCurrentMvpdStorageType=function(e){var t;!e||(t=this.getMvpdByID(e))&&(t.authPerBrowserSession?this.storageManager.switchToSessionStorage():this.storageManager.switchToLocalStorage())},te.prototype.getCurrentMvpd=function(){var e=null,t=this.getCurrentMvpdID();return t&&(e=this.getMvpdByID(t)),e},te.prototype.getCurrentSP=function(){var e=null,t=this.getCurrentMvpdID();return t&&this.getMvpdByID(t)&&(e=this.getMvpdByID(t).serviceProvider),e},te);function te(){this.mvpds=[],this.mvpdsLookUpTable={},this.storageManager=Qe.getInstance()}var ne=i(3),oe=(re.CLIENT_CREDENTIALS="client_credentials",re);function re(){}var ie=(ae.CLIENT_ID="client_id",ae.CLIENT_SECRET="client_secret",ae.GRANT_TYPES="grant_types",ae.REDIRECT_URI="redirect_uris",ae.CREATED_AT="client_id_issued_at",ae);function ae(){}var se=(ce.prototype.getClientId=function(){return this.clientId},ce.prototype.getClientSecret=function(){return this.clientSecret},ce.prototype.isValid=function(){return this&&null!=this.clientId&&null!=this.clientSecret&&null!=this.grantTypes&&null!=this.redirectURI&&null!=this.createdAt},ce.prototype.copyFromJSONObject=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},ce);function ce(e){if(this.clientId=null,this.clientSecret=null,this.grantTypes=null,this.redirectURI=null,this.createdAt=null,e)try{var t=JSON.parse(e);this.clientId=t[ie.CLIENT_ID],this.clientSecret=t[ie.CLIENT_SECRET],this.grantTypes=t[ie.GRANT_TYPES],this.redirectURI=t[ie.REDIRECT_URI],this.createdAt=t[ie.CREATED_AT]}catch(e){f.a.error("Application registration response data has invalid JSON format!")}}var ue=(le.ACCESS_TOKEN="access_token",le.EXPIRES_IN="expires_in",le.TOKEN_TYPE="token_type",le.CREATED_AT="created_at",le);function le(){}var de=(he.prototype.getAccessToken=function(){return this.accessToken},he.prototype.isValid=function(){return this&&null!=this.accessToken&&null!=this.tokenType&&null!=this.createdAt&&null!=this.expiresIn&&(new Date).getTime()<this.createdAt+1e3*this.expiresIn},he.prototype.copyFromJSONObject=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},he);function he(e){if(this.accessToken=null,this.expiresIn=null,this.tokenType=null,this.createdAt=null,e)try{var t=JSON.parse(e);this.accessToken=t[ue.ACCESS_TOKEN],this.expiresIn=t[ue.EXPIRES_IN],this.tokenType=t[ue.TOKEN_TYPE],this.createdAt=t[ue.CREATED_AT]}catch(e){f.a.error("Access token response data has invalid JSON format!")}}var ge=(pe.ID="id",pe.CODE="code",pe.REQUESTOR="requestor",pe.MVPD="mvpd",pe.GENERATED="generated",pe.EXPIRES="expires",pe.INFO="info",pe);function pe(){}var Te=(fe.prototype.getCode=function(){return this.code},fe.prototype.isValid=function(){return this&&null!=this.id&&null!=this.code&&null!=this.requestor&&null==this.mvpd&&null!=this.generated&&null!=this.expires&&null!=this.info&&(new Date).getTime()<this.expires},fe.prototype.copyFromJSONObject=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},fe);function fe(e){if(this.id=null,this.code=null,this.requestor=null,this.mvpd=null,this.generated=null,this.expires=null,this.info=null,e)try{var t=JSON.parse(e);this.id=t[ge.ID],this.code=t[ge.CODE],this.requestor=t[ge.REQUESTOR],this.mvpd=t[ge.MVPD],this.generated=t[ge.GENERATED],this.expires=t[ge.EXPIRES],this.info=t[ge.INFO]}catch(e){f.a.error("Registration Code response data has invalid JSON format!")}}var Ae=(Ee.createEmptyDataObject=function(e){switch(e){case qe.APPLICATION_REGISTRATION:return new se;case qe.ACCESS_TOKEN:return new de;case qe.REG_CODE:return new Te;default:return null}},Ee);function Ee(){}var Ie=i(7),Se=(ve.getInstance=function(){return this.instance||(this.instance=new ve),this.instance},ve.prototype.getFingerprint=function(){var n=this;return new Promise(function(t){Promise.all([i.e(3),i.e(4)]).then(function(){try{(new(i(17).Fingerprint)).get(function(e){f.a.debug("Fingerprinting result ",e),t(e)})}catch(e){f.a.error("Error calculating fingerprint!",e),t(n.defaultFingerprint)}}.bind(null,i)).catch(function(e){f.a.error("Error loading fingerprint library",e),f.a.debug("Using default fingerprinting value ",n.defaultFingerprint),t(n.defaultFingerprint)})})},ve);function ve(){this.defaultFingerprint=Ie(navigator.userAgent)}var _e=i(2),me=(Re.prototype.getIndividualizationData=function(){var s=this;return new Promise(function(i,a){s.fingerprintService.getFingerprint().then(function(e){s.httpService.post(c.INDIVIDUALIZATION_ENDPOINT_PATH,{fingerprint:e},{url:new _e(Ot.context.spAdobeServicesUrl,null,!0).origin}).then(function(t){try{for(var e=JSON.parse(t.data),n=0,o=s.REQUIRED_INDIVIDUALIZATION_KEYS;n<o.length;n++)if(!e[o[n]])return void a(H.IS2XX(""+H.PREFIX_IS+t.status,"Missing Individualization Key Error"));var r=t.xhr&&t.xhr.responseHeaders?t.xhr.responseHeaders:[];i({iid:e[s.INDIVIDUALIZATION_DEVICE_ID_KEY],sfp:r.pass_sfp})}catch(e){a(H.IS2XX(""+H.PREFIX_IS+t.status,"Invalid Individualization Data Error"))}},function(e){a(H.buildError(""+H.PREFIX_IS+e.status))})})})},Re);function Re(){this.INDIVIDUALIZATION_DEVICE_ID_KEY="deviceId",this.REQUIRED_INDIVIDUALIZATION_KEYS=[this.INDIVIDUALIZATION_DEVICE_ID_KEY],this.fingerprintService=Se.getInstance(),this.httpService=rt.getInstance()}var ye=function(e,t,n){this.id=e,this.authorized=t,n&&(this.error=n)},Ce=(Oe.prototype.startAuthorization=function(e,t){var o=this;f.a.debug("Authorization in progress for",e,t);var n=Ot.context.storageManager.getAuthorizationToken(Ot.context.requestorId,e);n&&n.isValid()?(f.a.debug("Authorization token found and valid!"),Ot.context.cachedAuthorization=!0,this.retrieveMediaToken(n,JSON.stringify({}),function(e,t,n){return o.onRetrieveMediaTokenSuccessful(e,t,n)},function(e,t,n){return o.onRetrieveMediaTokenError(e,t,n)})):(f.a.debug("Authorization token not found or invalid!"),Ot.context.cachedAuthorization=!1,this.retrieveAuthorizationToken(Array.isArray(e)?e[0]:e,t,function(e,t,n){return o.onRetrieveAuthorizationTokenSuccessful(e,t,n)},function(e,t,n){return o.onRetrieveAuthorizationTokenError(e,t,n)}))},Oe.prototype.retrieveAuthorizationToken=function(e,t,n,o){rt.getInstance().post(c.AUTHORIZATION_TOKEN_ENDPOINT_PATH,{resource_id:e,requestor_id:Ot.context.requestorId,authentication_token:Qe.getInstance().getAuthenticationToken().getSource(),mso_id:ee.getInstance().getCurrentMvpdID(),generic_data:t,userMeta:1},{dataType:"text"}).then(function(e){return n(e.data,e.status,e.xhr)},function(e){return o(e.data,e.status,e.xhr)})},Oe.prototype.onRetrieveAuthorizationTokenSuccessful=function(t,n,o){var r=this;if(E.checkPendingLogout(t))return Ot.context.storageManager.ditchTokens(),"34764"===E.getPendingLogoutReason(t)&&(f.a.warn("Device id mismatch!"),Ot.context.callbackManager.onErrorHandler(H.SEC412),Ot.context.storageManager.clearDeviceId()),void("getAuthorization"===Ot.context.methodInvokingAuthorization?Ot.getInstance().getAuthorization(Ot.context.resourceId):Ot.getInstance().checkAuthorization(Ot.context.resourceId));try{t=S.parseXML(t)}catch(e){return f.a.warn("Authorization failed"),void this.onRetrieveAuthorizationTokenError(t,n,o)}var e=_.getNodeText("authzToken",t);if(!e)return f.a.warn("Authorization failed"),void this.onRetrieveAuthorizationTokenError(t,n,o);var i,a=new K(e);a&&a.isValid()?(f.a.debug("Successfully retrieved authorization token!"),Ot.context.storageManager.setAuthorizationToken(a),(i=_.getNodeText("userMeta",t))&&(f.a.debug("Merging user metadata tokens."),Ot.context.storageManager.mergeUserMetadata(i),Ve.CACHE=null),this.retrieveMediaToken(a,JSON.stringify({}),function(e,t,n){return r.onRetrieveMediaTokenSuccessful(e,t,n)},function(e,t,n){return r.onRetrieveMediaTokenError(e,t,n)})):this.onRetrieveAuthorizationTokenError(t,n,o)},Oe.prototype.onRetrieveAuthorizationTokenError=function(e,t,n){var o;t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(f.a.warn("Authorization token retrieval failed due to missing required prerequisites!"),this.sendAuthorizationFailCallbacks(n.resourceId,l.TRACK_AUTHORIZATION_DETECTION,"",e)):(400!==t||"34763"!==H.getReasonFromErrorResponse(n.responseText)&&"34764"!==H.getReasonFromErrorResponse(n.responseText)||Ot.context.callbackManager.onErrorHandler(H.N130),o=Oe.parseErrorResponse(n),this.sendAuthorizationFailCallbacks(n.resourceId,o.code,o.message,H.fromAuthzErrorResponse(n,n.resourceId))),this.authorizationGeneralCleanup()},Oe.prototype.retrieveMediaToken=function(e,t,n,o){rt.getInstance().post(c.MEDIA_TOKEN_ENDPOINT_PATH,{authz_token:e.getSource(),requestor_id:Ot.context.requestorId,generic_data:t,session_guid:Qe.getInstance().getAuthenticationToken().getProperty("simpleTokenAuthenticationGuid"),hashed_guid:"false"},{dataType:"text"}).then(function(e){return n(e.data,e.status,e.xhr)},function(e){return o(e.data,e.status,e.xhr)})},Oe.prototype.onRetrieveMediaTokenSuccessful=function(e,t,n){var o=new K(e).getResourceID();if(E.checkPendingLogout(e))return Ot.context.storageManager.ditchTokens(),"58772"===E.getPendingLogoutReason(e)&&(f.a.warn("Device id mismatch!"),Ot.context.callbackManager.onErrorHandler(H.SEC412),Ot.context.storageManager.clearDeviceId()),void("getAuthorization"===Ot.context.methodInvokingAuthorization?Ot.getInstance().getAuthorization(o):Ot.getInstance().checkAuthorization(o));f.a.debug("Successfully retrieved media token!");var r=Ot.context.storageManager.getAuthorizationToken(Ot.context.requestorId,o);r&&r.isAuthZAll()&&Ot.context.callbackManager.onErrorHandler(H.Z010(o));var i=Ot.context.mvpdManager.getCurrentMvpd();i&&i.tempPass&&Ot.context.callbackManager.onErrorHandler(H.Z011(o)),this.sendAuthorizationSuccessCallbacks(o,e),this.authorizationGeneralCleanup()},Oe.prototype.onRetrieveMediaTokenError=function(e,t,n){var o;t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(f.a.warn("Media token retrieval failed due to missing required prerequisites!"),this.sendAuthorizationFailCallbacks(Ot.context.resourceId,l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,"",e)):(400!==t||"34763"!==H.getReasonFromErrorResponse(n.responseText)&&"34764"!==H.getReasonFromErrorResponse(n.responseText)||Ot.context.callbackManager.onErrorHandler(H.N130),o=Oe.parseErrorResponse(n),this.sendAuthorizationFailCallbacks(Ot.context.resourceId,o.code,o.message)),this.authorizationGeneralCleanup()},Oe.parseErrorResponse=function(e){var t,n="code"in e&&"message"in e?(f.a.warn("Received a non xhr object!"),e):400===e.status?(Qe.getInstance().clearStorage(),{code:l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,message:e.statusText}):e.responseText?((t=e.responseText.split("details")[1])&&2<t.length&&(t=t.substring(1,t.length-2)),{code:l.USER_NOT_AUTHORIZED_ERROR_STATUS,message:t}):{code:l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,message:""};return n},Oe.prototype.authorizationGeneralCleanup=function(){Ot.context.pendingAuthorizationInProgress=!1,Ot.context.methodInvokingAuthorization=null,Ot.context.authorizationExtraParameters=null,Ot.context.resourceId=null},Oe.prototype.sendAuthorizationSuccessCallbacks=function(e,t){f.a.debug("Send authorization success callbacks for: ",e,t),Ot.context.callbackManager.callCallback(u.AUTHORIZATION_SUCCESS_STATUS_CALLBACK,e,t),Ot.context.callbackManager.sendTrackingData(l.TRACK_AUTHORIZATION_DETECTION,!0)},Oe.prototype.sendAuthorizationFailCallbacks=function(e,t,n,o){void 0===o&&(o=void 0),f.a.debug("Send authorization fail callbacks for: ",e,t,n,o),o&&Ot.context.callbackManager.onErrorHandler(o),Ot.context.callbackManager.callCallback(u.AUTHORIZATION_FAIL_STATUS_CALLBACK,e,t,n),Ot.context.callbackManager.sendTrackingData(l.TRACK_AUTHORIZATION_DETECTION,!1,t,n)},Oe.prototype.retrievePreauthorizationDecisions=function(e,t,n){var o=Ot.context.storageManager.getAuthenticationToken();o&&o.isValid()&&Ot.context.spAdobeServicesUrl&&rt.getInstance().post(c.PREAUTHORIZATION_ENDPOINT_PATH,{authentication_token:o.getSource(),requestor_id:Ot.context.requestorId,resource_id:e},{dataType:"xml",traditional:!0}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)})},Oe.prototype.preauthorize=function(e,t,n){var o,r,i,a=Ot.context.storageManager.getAuthenticationToken();a&&a.isValid()&&Ot.context.spAdobeServicesUrl&&(o=""+s.V1+c.PREAUTHORIZATION_ENDPOINT_PATH,r={dataType:"json",traditional:!0,url:"https://"+Ot.context.spUrl},i={requestor:Ot.context.requestorId,resource:e.getResources(),deviceType:Ot.context.deviceInfo.deviceType},rt.getInstance().get(o,i,r).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)}))},Oe.prototype.intersectPreflight=function(e,t){var n=[];if(e&&t)for(var o=0,r=e;o<r.length;o++){var i=r[o];0<=t.indexOf(i.toUpperCase())&&n.push(i)}return n},Oe.prototype.intersectPreflightResources=function(e,t){var n=[];if(e&&t)for(var o=0,r=e;o<r.length;o++){var i=r[o],a=0<=t.indexOf(i.toUpperCase()),s=new ye(i,a);n.push(s)}return n},Oe.prototype.getAuthorizedResourcesFromPreauthorizationCache=function(){for(var e=Ot.context.storageManager.getPreauthorizationCache(),t=[],n=0,o=e.length;n<o;n++)!0===e[n].authorized&&t.push(e[n].id);return t},Oe.prototype.requestedResourcesEqualsPreauthorizationCache=function(e){var t=Ot.context.storageManager.getPreauthorizationCache();if(t.length!==e.length)return!1;for(var n=0,o=e;n<o.length;n++){var r=o[n];if(-1===N.inArray(r,t))return!1}return!0},Oe.prototype.isPreauthorizationCacheValid=function(e){var t=Ot.context.storageManager.getPreauthorizationCache();if(t.length!==e.length)return!1;var n=[];t.forEach(function(e){return n.push(e.id)});for(var o=0,r=e;o<r.length;o++){var i=r[o];if(-1===n.indexOf(i))return f.a.debug("[PREAUTHORIZE] Local cache is invalid."),!1}return!0},Oe);function Oe(){}var Pe=(be.prototype.logout=function(e){var t,n,o,r=Ot.context.clientInfo&&Ot.context.clientInfo.isBackgroundLogout();e&&Ot.context.spAdobeServicesUrl?(t={mso_id:e.getMvpdID(),requestor_id:Ot.context.requestorId,name_id:e.getProperty("simpleSamlNameID"),session_index:e.getProperty("simpleSamlSessionIndex"),pi:e.getProperty("simpleSamlNameID")},(n=e.getProperty("simpleTransientPartOfGuid"))&&(t.p1=n),t=N.extend(t,tt.globalData),o=Ot.context.spAdobeServicesUrl+c.LOGOUT_ENDPOINT_PATH,r?(f.a.debug("[LOGOUT] Performing background logout."),t.redirect_url=i.p+c.BACKGROUND_LOGOUT_COMPLETE_PATH,Ot.context.backgroundLogoutInProgress=!0,Ot.context.callbackManager.callCallback(u.DO_BACKGROUND_LOGOUT_STATUS_CALLBACK,o+C.param(t)),setTimeout(function(){Ot.context.backgroundLogoutInProgress&&(f.a.debug("[LOGOUT] Background logout timeout exceeded."),Ot.getInstance().completeBackgroundLogout())},3e4)):Ot.context.callbackManager.callCallback(u.NAVIGATE_TO_URL_STATUS_CALLBACK,o+C.param(t),null,null)):r?Ot.getInstance().completeBackgroundLogout():Ot.context.callbackManager.callCallback(u.RELOAD_STATUS_CALLBACK)},be);function be(){}function Ne(e,t,n){return e._api_methods||(e._api_methods={}),e._api_methods[t]=t,n}var De=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(a=(i<3?r(a):3<i?r(t,n,a):r(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},xe=i(7),ke=(Me.getInstance=function(){return this.instance||(this.instance=new Me),this.instance},Me.prototype.bind=function(e,t){Me.validate(e),Me.validate(t),this.callbackMap[e]&&Array.isArray(this.callbackMap[e])||(this.callbackMap[e]=[]),this.callbackMap[e].push(t)},Me.prototype.unbind=function(e,t){var n;Me.validate(e),t&&Me.validate(t),this.callbackMap[e]&&Array.isArray(this.callbackMap[e])&&(t?-1<(n=this.callbackMap[e].indexOf(t))&&this.callbackMap[e].splice(n,1):delete this.callbackMap[e])},Me.prototype.executeCallbacks=function(e,t){if(this.callbackMap[e]&&Array.isArray(this.callbackMap[e]))for(var n=0,o=this.callbackMap[e];n<o.length;n++){var r=o[n],i=t?[r].concat(t):[r];this.callCallback.apply(Ot.getInstance(),i)}},Me.prototype.onErrorHandler=function(e){this.executeCallbacks(u.SEND_ADVANCED_STATUS_CALLBACK,e)},Me.prototype.sendTrackingData=function(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===o&&(o=null);var r=null,i=Ot.context.mvpdManager.getCurrentMvpdID(),a=null,s=Ot.context.storageManager.getAuthenticationToken();switch(s&&s.getSubMVPDID()&&(a=i,i=s.getSubMVPDID()),e){case l.TRACK_MVPD_SELECTION:r=[Ot.context.mvpdManager.getCurrentMvpdID(),Ot.context.deviceInfo.deviceType,Ot.context.deviceInfo.clientType,Ot.context.deviceInfo.os];break;case l.TRACK_AUTHENTICATION_DETECTION:t?(r=[!0,i,xe(s.getProperty("simpleTokenAuthenticationGuid")),Ot.context.cachedAuthentication,Ot.context.deviceInfo.deviceType,Ot.context.deviceInfo.clientType,Ot.context.deviceInfo.os,a],Ot.context.cachedAuthentication=!0):r=[!1,null,null,null,Ot.context.deviceInfo.deviceType,Ot.context.deviceInfo.clientType,Ot.context.deviceInfo.os,null];break;case l.TRACK_AUTHORIZATION_DETECTION:r=t?[!0,i,xe(s.getProperty("simpleTokenAuthenticationGuid")),Ot.context.cachedAuthorization,n,o,Ot.context.deviceInfo.deviceType,Ot.context.deviceInfo.clientType,Ot.context.deviceInfo.os,a]:[!1,i,s?xe(s.getProperty("simpleTokenAuthenticationGuid")):null,Ot.context.cachedAuthorization,n,o,Ot.context.deviceInfo.deviceType,Ot.context.deviceInfo.clientType,Ot.context.deviceInfo.os,a]}Ot.context.callbackManager.callCallback(u.SEND_TRACKING_DATA_STATUS_CALLBACK,e,r)},Me.prototype.callCallback=function(r){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];function a(e){return e&&"null"!==e&&4<e.length?e:window.location.href}setTimeout(function(){switch(f.a.debug("Call callback: "+r+"(): ",i),r){case u.RELOAD_STATUS_CALLBACK:location.reload();break;case u.OPEN_IFRAME_STATUS_CALLBACK:createIFrame(i[1],i[2]);var e=i[0]+"&"+C.param({redirect_url:a(i[3])}),t=document.getElementsByName("mvpdframe");0<t.length?(f.a.debug("Using an iFrame. iFrame URL: ",e),t[0].setAttribute("src",e)):(f.a.debug("Using a Pop-Up window. Pop-Up window URL: ",e),T.openLoginWindow(e,"mvpdframe",Ot.getInstance().completeBackgroundLogin));break;case u.NAVIGATE_TO_URL_STATUS_CALLBACK:var n=i[0]+"&"+C.param({redirect_url:a(i[1])});f.a.debug("navigateToUrl:",n),i[2]?T.openLoginWindow(n,"mvpdwindow",Ot.getInstance().completeBackgroundLogin):window.location.href=n;break;case u.DO_BACKGROUND_LOGOUT_STATUS_CALLBACK:T.createHiddenIframe("com_adobe_pass_background_logout",i[0]);break;default:var o=window.eval.call(window,r);if(void 0===o)return void f.a.warn("Callback < "+r+" > is NOT implemented");o.apply(window,i)}},4)},Me.validate=function(e){if(1024<e.length)throw new TypeError("InvalidArgumentError");if(null==e.match(/^[0-9a-zA-Z][-._a-zA-Z0-9]*$/))throw new TypeError("InvalidArgumentError")},De([Ne],Me.prototype,"callCallback",null),Me);function Me(){this.callbackMap={}}var Ue=(Le.getInstance=function(){return this.instance||(this.instance=new Le),this.instance},Object.defineProperty(Le.prototype,"clientInfo",{get:function(){return this._clientInfo},set:function(e){this._clientInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"deviceInfo",{get:function(){return this._deviceInfo},set:function(e){this._deviceInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"requestorId",{get:function(){return this._requestorId},set:function(e){this._requestorId=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"validRequestorId",{get:function(){return this._validRequestorId},set:function(e){this._validRequestorId=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"proxyURL",{get:function(){return this._proxyURL},set:function(e){this._proxyURL=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"spUrl",{get:function(){return this._spUrl},set:function(e){this._spUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"applicationId",{get:function(){return this._applicationId},set:function(e){this._applicationId=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"spAdobeServicesUrl",{get:function(){return this._spAdobeServicesUrl},set:function(e){this._spAdobeServicesUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"cachedAuthorization",{get:function(){return this._cachedAuthorization},set:function(e){this._cachedAuthorization=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"cachedAuthentication",{get:function(){return this._cachedAuthentication},set:function(e){this._cachedAuthentication=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"backgroundLoginInProgress",{get:function(){return this._backgroundLoginInProgress},set:function(e){this._backgroundLoginInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"backgroundLogoutInProgress",{get:function(){return this._backgroundLogoutInProgress},set:function(e){this._backgroundLogoutInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"interactiveAuthenticationInProgress",{get:function(){return this._interactiveAuthenticationInProgress},set:function(e){this._interactiveAuthenticationInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"nonInteractiveAuthenticationInProgress",{get:function(){return this._nonInteractiveAuthenticationInProgress},set:function(e){this._nonInteractiveAuthenticationInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"methodInvokingAuthorization",{get:function(){return this._methodInvokingAuthorization},set:function(e){this._methodInvokingAuthorization=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"pendingAuthorizationInProgress",{get:function(){return this._pendingAuthorizationInProgress},set:function(e){this._pendingAuthorizationInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"authorizationExtraParameters",{get:function(){return this._authorizationExtraParameters},set:function(e){this._authorizationExtraParameters=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"authenticationExtraParameters",{get:function(){return this._authenticationExtraParameters},set:function(e){this._authenticationExtraParameters=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"passiveAuthenticationTimer",{get:function(){return this._passiveAuthenticationTimer},set:function(e){this._passiveAuthenticationTimer=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"passiveAuthenticationTimerMilliseconds",{get:function(){return this._passiveAuthenticationTimerMilliseconds},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"resourceId",{get:function(){return this._resourceId},set:function(e){this._resourceId=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"redirectUrl",{get:function(){return this._redirectUrl},set:function(e){this._redirectUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le,"pendingCallsQueue",{get:function(){return this._pendingCallsQueue},set:function(e){this._pendingCallsQueue=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"configurationService",{get:function(){return this._configurationService},set:function(e){this._configurationService=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"userProfileService",{get:function(){return this._userProfileService},set:function(e){this._userProfileService=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"decisionService",{get:function(){return this._decisionService},set:function(e){this._decisionService=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"logoutService",{get:function(){return this._logoutService},set:function(e){this._logoutService=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"mvpdManager",{get:function(){return this._mvpdManager},set:function(e){this._mvpdManager=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"storageManager",{get:function(){return this._storageManager},set:function(e){this._storageManager=e},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"callbackManager",{get:function(){return this._callbackManager},set:function(e){this._callbackManager=e},enumerable:!1,configurable:!0}),Le.prototype.configureServiceProviderUrl=function(e){null!=e&&e.match(/(.*)-staging.(.*)/)?this.spUrl="sp.auth-staging.adobe.com":this.spUrl="sp.auth.adobe.com",this.spAdobeServicesUrl="https://"+this.spUrl+"/adobe-services",f.a.info("Running against service provider: "+this.spUrl)},Le._pendingCallsQueue=[],Le);function Le(){this._applicationId=null,this._clientInfo=null,this._deviceInfo={deviceType:"",clientType:"",os:""},this._requestorId=null,this._validRequestorId=!1,this._resourceId=null,this._redirectUrl=null,this._cachedAuthentication=!0,this._cachedAuthorization=!1,this._backgroundLoginInProgress=!1,this._backgroundLogoutInProgress=!1,this._nonInteractiveAuthenticationInProgress=!1,this._interactiveAuthenticationInProgress=!1,this._pendingAuthorizationInProgress=!1,this._methodInvokingAuthorization=null,this._authenticationExtraParameters=null,this._authorizationExtraParameters=null,this._passiveAuthenticationTimerMilliseconds=3e4,this._passiveAuthenticationTimer=null,this.configurationService=new at,this.userProfileService=new Ve,this.decisionService=new Ce,this.logoutService=new Pe,this.mvpdManager=ee.getInstance(),this.storageManager=Qe.getInstance(),this.callbackManager=ke.getInstance()}var we=(He.getInstance=function(){return this.instance||(this.instance=new He),this.instance},He.prototype.getDeviceInfo=function(){return{ap_42:navigator.vendor?navigator.vendor:"anonymous",ap_11:navigator.platform,ap_z:navigator.userAgent}},He.prototype.getXDeviceInfo=function(){return{applicationId:Ue.getInstance().applicationId,model:navigator.platform,browserVersion:navigator.appVersion,browserVendor:navigator.vendor?navigator.vendor:"anonymous",userAgent:navigator.userAgent}},He.getDeviceIdentifier=function(e){return{fingerprint:e,vendor:navigator.vendor?navigator.vendor:"anonymous",platform:navigator.platform,browser:navigator.userAgent}},He.prototype.getDeviceId=function(){var o=this;return new Promise(function(t,n){var e=o.storageManager.getDeviceId();e?t(e):o.individualizationService.getIndividualizationData().then(function(e){o.storageManager.setDeviceId(e.iid),o.storageManager.setSFP(e.sfp),t(e.iid)},function(e){n(e)})})},He);function He(){this.storageManager=Qe.getInstance(),this.individualizationService=new me}var ze=i(2),Ge=(Fe.getInstance=function(){return this.instance||(this.instance=new Fe),this.instance},Fe.prototype.obtainRegCode=function(o){var r=this;return new Promise(function(t,n){var e=r.storageManager.getRegCode();e?t(e):r.retrieveRegCode(o).then(function(e){t(e)},function(e){n(e)})})},Fe.prototype.retrieveRegCode=function(i){var a=this;return new Promise(function(n,t){function o(e){var t=new Te(e.data);a.storageManager.setRegCode(t),n(t)}function r(e){400!==e.status&&401!==e.status&&Fe.RETRY_RETRIEVING_REG_CODE?(Fe.RETRY_RETRIEVING_REG_CODE=!1,a.retrieveRegCode(i).then(function(e){n(e)},function(e){t(e)})):e.status===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?t(e.data):t(H.REG500)}a.identificationManager.getDeviceId().then(function(e){a.httpService.post("/reggie/v1/"+i+c.REG_CODE_ENDPOINT_PATH,{requestor:i,deviceId:e,format:"json"},{url:new ze(Ot.context.spAdobeServicesUrl,null,!0).origin,dataType:"application/x-www-form-urlencoded"}).then(o,r)},function(e){t(e)})})},Fe.RETRY_RETRIEVING_REG_CODE=!0,Fe);function Fe(){this.httpService=rt.getInstance(),this.storageManager=Qe.getInstance(),this.identificationManager=we.getInstance()}var Ke=i(2),Ve=(Be.prototype.getClientAuthenticationStatus=function(){var e=Ot.context.storageManager.getAuthenticationToken();return e&&e.isValid()?Ot.context.mvpdManager.isMvpdValid(e.getMvpdID())?l.USER_AUTHENTICATED_STATUS:l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS:Ot.context.validRequestorId?l.USER_NOT_AUTHENTICATED_ERROR_STATUS:l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS},Be.prototype.startInteractiveAuthentication=function(){if(f.a.debug("User interactive authentication in progress!"),Ot.context.interactiveAuthenticationInProgress=!0,Ot.context.storageManager.getCanAuthenticate())Ot.context.storageManager.setMvpdSelection(Z.REMEMBERED_SELECTION),Ot.context.storageManager.setCanAuthenticate(!1),this.goToMvpdLoginPage();else{Ot.context.storageManager.setCanAuthenticate(!1);for(var e=[],t=0,n=Ot.context.mvpdManager.getRequestorMVPDs();t<n.length;t++){var o=n[t];e.push({ID:o.id,displayName:o.displayName,logoURL:o.logoUrl})}0===e.length&&f.a.error("The displayProviderDialog callback is going to return an empty MVPDs list!"),Ot.context.callbackManager.callCallback(u.ACCESS_ENABLER_LIBRARY_DISPLAY_PROVIDER_DIALOG_STATUS_CALLBACK,e)}},Be.prototype.startNonInteractiveAuthentication=function(e){f.a.debug("User non-interactive authentication in progress!"),Ot.context.nonInteractiveAuthenticationInProgress=!0,Ot.context.mvpdManager.setCurrentMvpdID(e),Ot.context.storageManager.setMvpdSelection(Z.AUTO_SELECTION),Ot.context.callbackManager.sendTrackingData(l.TRACK_MVPD_SELECTION),Ot.context.mvpdManager.getMvpdByID(e).passiveAuthnEnabled?(Ot.context.storageManager.setCanAuthenticate(!1),this.startPassiveAuthentication()):(this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS,H.N002),this.authenticationGeneralCleanup())},Be.prototype.startPassiveAuthentication=function(){var t=this;f.a.debug("Starting passive authentication!"),Ot.context.backgroundLoginInProgress=Ot.context.clientInfo&&Ot.context.clientInfo.isBackgroundLogin(),Ot.context.userProfileService.buildAuthenticationUrl(!0,Ot.context.mvpdManager.getCurrentMvpd(),Ot.context.authenticationExtraParameters,!1).then(function(e){T.createHiddenIframe("com_adobe_pass_passive_authn",e),Ot.context.passiveAuthenticationTimer=setTimeout(function(){Ot.context.nonInteractiveAuthenticationInProgress?(t.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS,H.N002),t.authenticationGeneralCleanup()):(Ot.context.passiveAuthenticationTimer=null,Ot.context.configurationService.onConfigurationInitializedComplete())},Ot.context.passiveAuthenticationTimerMilliseconds)},function(e){Ot.context.nonInteractiveAuthenticationInProgress&&(t.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS,e.data),t.authenticationGeneralCleanup())})},Be.prototype.goToMvpdLoginPage=function(){var t,e,n=Ot.context.mvpdManager.getCurrentMvpd();n?(t=Ot.context.redirectUrl,e=Ot.context.authenticationExtraParameters,Ot.context.backgroundLoginInProgress=Ot.context.clientInfo&&Ot.context.clientInfo.isBackgroundLogin(),this.buildAuthenticationUrl(!1,n,e,Ot.context.backgroundLoginInProgress&&!n.tempPass).then(function(e){Ot.context.backgroundLoginInProgress&&n.tempPass?(f.a.debug("Performing back-channel authentication using TempPass MVPD: ",n),rt.getInstance().get("",{redirect_url:new Ke(Ot.context.spAdobeServicesUrl,null,!0).origin},{url:e,dataType:"text/html"}).then(function(){f.a.debug("Back-channel authentication call with TempPass finished with success"),Ot.getInstance().completeBackgroundLogin()},function(){f.a.debug("Back-channel authentication call with TempPass finished with error"),Ot.getInstance().completeBackgroundLogin()})):(f.a.debug("Performing authentication using MVPD: ",n),!0===Ot.context.backgroundLoginInProgress&&(t=i.p+c.BACKGROUND_LOGIN_COMPLETE_PATH),!1===Ot.context.backgroundLoginInProgress&&X.a.setPendingAuthenticationCookieState(!0),n.iFrameRequired?Ot.context.callbackManager.callCallback(u.OPEN_IFRAME_STATUS_CALLBACK,e,n.iFrameWidth,n.iFrameHeight,t):Ot.context.callbackManager.callCallback(u.NAVIGATE_TO_URL_STATUS_CALLBACK,e,t,Ot.context.backgroundLoginInProgress))},function(e){Ot.context.callbackManager.onErrorHandler(e.data),Ot.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS)})):(this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS,H.N500),this.authenticationGeneralCleanup())},Be.prototype.buildAuthenticationUrl=function(r,i,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),new Promise(function(o,t){Ge.getInstance().obtainRegCode(Ot.context.requestorId).then(function(e){var t={reg_code:e.getCode(),mso_id:i.id,requestor_id:Ot.context.requestorId,no_iframe:s?"true":"false",domain_name:"adobe.com"};null!=a&&(t.generic_data=a),r&&(t.passive="true",t.redirect_url=Ot.context.spAdobeServicesUrl+c.PASSIVE_AUTHENTICATION_REDIRECT_ENDPOINT_PATH),Ot.context.clientInfo&&null!==Ot.context.clientInfo.isIFrameRequiredForMvpd(i.id)&&(t.iframe_required=Ot.context.clientInfo.isIFrameRequiredForMvpd(i.id)),t=N.extend(t,tt.globalData);var n=Ot.context.spAdobeServicesUrl+c.AUTHENTICATION_ENDPOINT_PATH+C.param(t);o(n)},function(e){t({data:e,status:H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})})})},Be.prototype.retrieveAuthenticationToken=function(t,n){Ge.getInstance().obtainRegCode(Ot.context.requestorId).then(function(e){rt.getInstance().post(c.AUTHENTICATION_TOKEN_ENDPOINT_PATH,{_method:"GET",reg_code:e.getCode(),requestor_id:Ot.context.requestorId},{dataType:"xml"}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)})},function(e){n(e,H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},Be.prototype.onAuthenticationTokenSuccessful=function(e){var t,n,o,r;E.checkPendingLogout(e)?(Ot.context.storageManager.ditchTokens(),this.onAuthenticationTokenError(e,null,null)):(t=new K(_.getNodeText("authnToken",e)))&&t.isValid()?(f.a.debug("Successfully retrieved authn token!"),Ot.context.cachedAuthentication=!1,n=t.getMvpdID(),Ot.context.mvpdManager.setCurrentMvpdID(n),(o=Ot.context.mvpdManager.getMvpdByID(n))&&!o.tempPass&&Ot.context.storageManager.setCanAuthenticate(!0),Ot.context.storageManager.setAuthenticationToken(t),r=_.getNodeText("userMeta",e),Ot.context.storageManager.setUserMetadata(r),Be.CACHE=null,Ot.context.userProfileService.completeAuthenticationTokenSuccessful()):this.onAuthenticationTokenError(e,null,null,t)},Be.prototype.onAuthenticationTokenError=function(e,t,n,o){var r;void 0===o&&(o=null),t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(f.a.warn("Authentication token retrieval failed due to missing required prerequisites!"),Ot.context.callbackManager.onErrorHandler(e)):(401===t||400===t&&("34763"===H.getReasonFromErrorResponse(n.responseText)||"34764"===H.getReasonFromErrorResponse(n.responseText))?Ot.context.callbackManager.onErrorHandler(H.N130):Ot.context.callbackManager.onErrorHandler(H.N000),o?!o.isExpired()||(r=Ot.context.mvpdManager.getCurrentMvpd())&&r.tempPass&&Ot.context.callbackManager.onErrorHandler(H.N111):f.a.error("Error retrieving authentication token: ",e)),Ot.context.userProfileService.completeAuthenticationTokenError()},Be.prototype.completeAuthenticationTokenSuccessful=function(){Ot.context.backgroundLoginInProgress&&this.backgroundLoginSuccessHelper(),at.configurationInitialized||Ot.context.configurationService.onConfigurationInitializedComplete(),this.authenticationGeneralCleanup()},Be.prototype.completeAuthenticationTokenError=function(){Ot.context.backgroundLoginInProgress&&this.backgroundLoginFailHelper(),at.configurationInitialized||Ot.context.configurationService.onConfigurationInitializedComplete(),this.authenticationGeneralCleanup()},Be.prototype.completePassiveAuthentication=function(){var o=this;Ot.context.passiveAuthenticationTimer&&(f.a.debug("Completed passive authentication!"),clearTimeout(Ot.context.passiveAuthenticationTimer),Ot.context.passiveAuthenticationTimer=null,Ot.context.userProfileService.retrieveAuthenticationToken(function(e){return o.onAuthenticationTokenSuccessful(e)},function(e,t,n){return o.onAuthenticationTokenError(e,t,n)}))},Be.prototype.authenticationGeneralCleanup=function(){Ot.context.interactiveAuthenticationInProgress&&(Ot.context.interactiveAuthenticationInProgress=!1),Ot.context.nonInteractiveAuthenticationInProgress&&(Ot.context.nonInteractiveAuthenticationInProgress=!1,Ot.context.passiveAuthenticationTimer=null),Ot.context.backgroundLoginInProgress&&(Ot.context.backgroundLoginInProgress=!1),Ot.context.pendingAuthorizationInProgress&&Ot.context.decisionService.authorizationGeneralCleanup(),Ot.context.storageManager.setRegCode(null)},Be.prototype.backgroundLoginSuccessHelper=function(){var e=Ot.context.storageManager.getAuthenticationToken(),t=Ot.context.mvpdManager.getCurrentMvpd();e&&e.isAuthNAll()&&Ot.context.callbackManager.onErrorHandler(H.N010),t&&t.tempPass&&Ot.context.callbackManager.onErrorHandler(H.N011),Ot.context.pendingAuthorizationInProgress?null!==Ot.context.resourceId?(f.a.debug("Pending authorization resource: "+Ot.context.resourceId+" and extra parameters: "+Ot.context.authorizationExtraParameters),Ot.getInstance().getAuthorization(Ot.context.resourceId,null,Ot.context.authorizationExtraParameters)):Ot.context.decisionService.sendAuthorizationFailCallbacks(Ot.context.resourceId,l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,"",H.Z100):this.sendAuthenticationSuccessCallbacks()},Be.prototype.backgroundLoginFailHelper=function(){Ot.context.pendingAuthorizationInProgress?Ot.context.decisionService.sendAuthorizationFailCallbacks(Ot.context.resourceId,l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,""):this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS)},Be.prototype.sendAuthenticationSuccessCallbacks=function(){f.a.debug("Send authentication success callbacks"),Ot.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,1,""),Ot.context.callbackManager.sendTrackingData(l.TRACK_AUTHENTICATION_DETECTION,!0)},Be.prototype.sendAuthenticationFailCallbacks=function(e,t){void 0===t&&(t=void 0),f.a.debug("Send authentication fail callbacks for: ",e,t),t&&Ot.context.callbackManager.onErrorHandler(t),Ot.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,e),Ot.context.callbackManager.sendTrackingData(l.TRACK_AUTHENTICATION_DETECTION,!1)},Be.prototype.getValue=function(o,e){var r=Ot.context.callbackManager.callCallback;switch(o){case"TTL_AUTHN":Be.getAuthnTTL();break;case"TTL_AUTHZ":Be.getAuthzTTL(e);break;case"DEVICEID":this.getDeviceID();break;case"MVPD_SELECTION":Be.getMVPDSelection();break;default:try{var t,n,i=Qe.getInstance().getUserMetadata(),a=Be.CACHE;if(!o)return void r(u.METADATA_STATUS_CALLBACK,o,null,null);Be.isMetadataValid(i)?Be.isMetadataValid(a)&&a.updated>=i.updated?(n=(t=a.data[o])?a.encrypted&&-1<N.inArray(o,a.encrypted):null,r(u.METADATA_STATUS_CALLBACK,o,n,t)):this.retrieveEncryptedMetadata(i,function(e){try{e=JSON.parse(e);var t=(Be.CACHE=e)&&e.data&&e.data[o]?e.data[o]:null,n=e&&e.encrypted&&-1<N.inArray(o,e.encrypted);r(u.METADATA_STATUS_CALLBACK,o,null!=t?n:null,t)}catch(e){f.a.error(e),r(u.METADATA_STATUS_CALLBACK,o,null,null)}},function(e,t){t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?Ot.context.callbackManager.onErrorHandler(o):r(u.METADATA_STATUS_CALLBACK,o,null,null)}):r(u.METADATA_STATUS_CALLBACK,o,null,null)}catch(e){r(u.METADATA_STATUS_CALLBACK,o,null,null)}}},Be.prototype.retrieveDeviceIDHash=function(e,t,n){Ot.context.requestorId?rt.getInstance().post(c.DEVICE_ID_ENDPOINT_PATH,{requestor_id:Ot.context.requestorId,device_id:e},{dataType:"text/plain"}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)}):n(null)},Be.prototype.retrieveEncryptedMetadata=function(e,t,n){var o=Qe.getInstance().getAuthenticationToken();Ot.context.requestorId&&o?rt.getInstance().post(c.USER_METADATA_ENDPOINT_PATH,{requestor:Ot.context.requestorId,authn:o.getSource(),metadata:JSON.stringify(e)},{dataType:"text"}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)}):n(null)},Be.getAuthnTTL=function(){var e=null,t=Qe.getInstance().getAuthenticationToken();t&&t.isValid()&&(e=t.getExpiryDate().getTime()),Ot.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,"TTL_AUTHN",null,e)},Be.getAuthzTTL=function(e){var t,n=null,o=Array.isArray(e)&&0<e.length?e[0]:null;!o||(t=Qe.getInstance().getAuthorizationToken(Ot.context.requestorId,o))&&t.isValid()&&(n=t.getExpiryDate().getTime()),Ot.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,"TTL_AUTHZ",e,n)},Be.prototype.getDeviceID=function(){function t(e,t){t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS&&Ot.context.callbackManager.onErrorHandler(e),o(u.METADATA_STATUS_CALLBACK,"DEVICEID",null,null)}var n=this,o=Ot.context.callbackManager.callCallback;we.getInstance().getDeviceId().then(function(e){n.retrieveDeviceIDHash(e,function(e){return t=e,void(E.checkPendingLogout(t)?(Ot.context.storageManager.ditchTokens(),o(u.METADATA_STATUS_CALLBACK,"DEVICEID",null,null)):o(u.METADATA_STATUS_CALLBACK,"DEVICEID",null,t));var t},t)},function(e){t(e,H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},Be.getMVPDSelection=function(){var e=Qe.getInstance().getMvpdSelection();Ot.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,"MVPD_SELECTION",null,e)},Be.isMetadataValid=function(e){return e&&e.data&&e.updated},Be.CACHE=null,Be);function Be(){}var qe=(je.LOCAL_STORAGE_PRIMARY_KEY="entitlementToken",je.SESSION_STORAGE_PRIMARY_KEY="sessionStorage",je.MEMORY_STORAGE_PRIMARY_KEY="memoryStorage",je.STORAGE_VERSION_KEY="storageVersion",je.GENERIC_REQUESTOR="GenericRequestor",je.DEVICE_IID_KEY="iid",je.DEVICE_SFP_KEY="sfp",je.APPLICATION_REGISTRATION="applicationRegistration",je.ACCESS_TOKEN="accessToken",je.REG_CODE="regCode",je);function je(){}var Ye=(Ze.LOCAL_STORAGE="local",Ze.SESSION_STORAGE="session",Ze.MEMORY_STORAGE="memory",Ze);function Ze(){}var Qe=(Je.getInstance=function(){return this.instance||(this.instance=new Je),this.instance},Je.prototype.getEntitlementToken=function(){return this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken},Je.prototype.syncStorage=function(){var o=this;return new Promise(function(n){o.pm.postStorage("getItems",qe.STORAGE_VERSION_KEY,qe.DEVICE_IID_KEY,qe.GENERIC_REQUESTOR,qe.LOCAL_STORAGE_PRIMARY_KEY,qe.SESSION_STORAGE_PRIMARY_KEY).then(function(t){if(!o.isDirty&&!N.isEmpty(t)&&!t.error)for(var e in t)if(t[e]!==localStorage.getItem(e)&&(localStorage.setItem(e,t[e]),e===o.storagePrimaryKey))try{o.entitlementToken=JSON.parse(t[e])}catch(e){f.a.error("Error parsing value from SSO storage",e)}o.pm.postStorage("isSessionCookieSet").then(function(e){o.isDirty||N.isEmpty(t)||e.isSessionCookieSet&&X.a.setSessionCookie()}),o.startTimer(),n()})})},Je.prototype.getStorageData=function(){return[this.internalLocalStorage.getItem(qe.LOCAL_STORAGE_PRIMARY_KEY),this.internalLocalStorage.getItem(qe.SESSION_STORAGE_PRIMARY_KEY)]},Je.prototype.switchToSessionStorage=function(){var e=this;this.isLocalStorageSpaceEnabled()&&(f.a.warn("Switch to using session storage!"),this.storageType=Ye.SESSION_STORAGE,this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage,X.a.isSessionCookieSet()||(f.a.warn("New authentication session! Session storage will be reset!"),this.isDirty=!0,X.a.setSessionCookie(),this.pm.postStorage("setSessionCookie").then(function(){e.isDirty=!1}),this.saveEntitlementTokenToStorage(new J))),this.entitlementToken=this.loadEntitlementTokenFromStorage()},Je.prototype.switchToLocalStorage=function(){this.isLocalStorageSpaceEnabled()&&(f.a.warn("Switch to using local storage!"),this.storageType=Ye.LOCAL_STORAGE,this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage),this.entitlementToken=this.loadEntitlementTokenFromStorage()},Je.prototype.setMvpdSelection=function(e){this.isDirty=!0,this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdSelection(e),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY)},Je.prototype.getMvpdSelection=function(){return this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY),this.entitlementToken.getMvpdSelection()},Je.prototype.setApplicationRegistration=function(e){this.saveDataToStorage(e,qe.APPLICATION_REGISTRATION)},Je.prototype.getApplicationRegistration=function(){return this.loadDataFromStorage(qe.APPLICATION_REGISTRATION)},Je.prototype.setAccessToken=function(e){this.saveDataToStorage(e,qe.ACCESS_TOKEN)},Je.prototype.getAccessToken=function(){return this.loadDataFromStorage(qe.ACCESS_TOKEN)},Je.prototype.setRegCode=function(e){this.saveDataToStorage(e,qe.REG_CODE)},Je.prototype.getRegCode=function(){return this.loadDataFromStorage(qe.REG_CODE)},Je.prototype.setAuthenticationToken=function(e){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t=this.entitlementToken.getAuthenticationTokens(),n=0;n<t.length;)new K(t[n]).getRequestorID()===e.getRequestorID()?t.splice(n,1):n++;t.push(e.getSource()),this.saveEntitlementTokenToStorage(this.entitlementToken)},Je.prototype.getAuthenticationToken=function(e){var t,n=this.getMvpdID(),o=null;return!n||(t=ee.getInstance().getMvpdByID(n))&&(o=t.authPerAggregator?this.searchForAuthenticationTokenForRequestor(Ot.context.requestorId):e?this.searchForFirstAuthenticationToken():this.searchForFirstValidAuthenticationToken()),o},Je.prototype.searchForFirstValidAuthenticationTokenForCurrentMvpd=function(){var e=this.getMvpdID(),t=null;if(e){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var n=void 0,o=0,r=this.entitlementToken.getAuthenticationTokens();o<r.length;o++){var i=r[o];if((n=new K(i)).getMvpdID()===e&&n.isValid()){t=n;break}}}return t},Je.prototype.setAuthorizationToken=function(e){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t,n=this.entitlementToken.getAuthorizationTokens(),o=0;o<n.length;)(t=new K(n[o])).getRequestorID()===e.getResourceID()&&t.getResourceID()===e.getResourceID()?n.splice(o,1):o++;n.push(e.getSource()),this.saveEntitlementTokenToStorage(this.entitlementToken)},Je.prototype.getAuthorizationToken=function(e,t){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var n=null,o=0,r=this.entitlementToken.getAuthorizationTokens();o<r.length;o++){var i,a=r[o];if((i=new K(a)).getRequestorID()===e&&i.getResourceID()===t){n=i;break}}return n},Je.prototype.setUserMetadata=function(e){if(this.isDirty=!0,N.isEmpty(e))f.a.warn("Received empty userMetadata");else if(Ot.context.requestorId){var t,n,o,r=this.getMvpdID();this.entitlementToken=this.loadEntitlementTokenFromStorage();try{this.entitlementToken.getUserMetadata()||this.entitlementToken.setUserMetadata({}),r?(t=ee.getInstance().getMvpdByID(r))?(n=JSON.parse(e),o=t.authPerAggregator?Ot.context.requestorId:qe.GENERIC_REQUESTOR,this.entitlementToken.getUserMetadata()[o]=n,this.saveEntitlementTokenToStorage(this.entitlementToken)):f.a.warn("Cannot set user metadata token: invalid MVPD selected."):f.a.warn("Cannot set user metadata token: no MVPD selected.")}catch(e){f.a.error(e)}}else f.a.warn("Cannot set user metadata: requestor is not configured.")},Je.prototype.mergeUserMetadata=function(t){var e=this.getUserMetadata();try{var n=JSON.parse(t),o=parseInt(n.updated,10);if(parseInt(e.updated,10)<o&&n.data)try{e.updated=o;var r=n.data;for(var i in r)r.hasOwnProperty(i)&&(e.data[i]=r[i]);this.setUserMetadata(JSON.stringify(e))}catch(e){f.a.warn("Error merging user metadata tokens."),this.setUserMetadata(t)}else f.a.warn("The metadata token received from the server has invalid properties.")}catch(e){f.a.warn("The metadata token received from the server cannot be parsed.")}},Je.prototype.getUserMetadata=function(){var e,t,n=this.getMvpdID(),o=null;return!n||(e=ee.getInstance().getMvpdByID(n))&&(this.entitlementToken=this.loadEntitlementTokenFromStorage(),(t=this.entitlementToken.getUserMetadata())&&(o=e.authPerAggregator?t[Ot.context.requestorId]:t[qe.GENERIC_REQUESTOR])),o},Je.prototype.setMvpdID=function(e){this.isDirty=!0,this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdID(null===e?null:String(e)),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY)},Je.prototype.getMvpdID=function(){return this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY),this.entitlementToken.getMvpdID()},Je.prototype.setCanAuthenticate=function(e){this.isDirty=!0,this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setCanAuthenticate(Boolean(e)),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY)},Je.prototype.getCanAuthenticate=function(){return this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===Ye.SESSION_STORAGE&&(this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY),Boolean(this.entitlementToken.getCanAuthenticate())},Je.prototype.setPreauthorizationCache=function(e){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setPreauthorizationCache(e.concat()),this.saveEntitlementTokenToStorage(this.entitlementToken)},Je.prototype.getPreauthorizationCache=function(){return this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.getPreauthorizationCache()},Je.prototype.setDeviceId=function(e){var t=this;this.isDirty=!0,this.storage.setItem(qe.DEVICE_IID_KEY,e),this.storageType!==Ye.MEMORY_STORAGE&&this.pm.postStorage("setItem",qe.DEVICE_IID_KEY,e).then(function(){return t.isDirty=!1})},Je.prototype.setSFP=function(e){var t=this;this.isDirty=!0,this.storage.setItem(qe.DEVICE_SFP_KEY,e),this.storageType!==Ye.MEMORY_STORAGE&&this.pm.postStorage("setItem",qe.DEVICE_SFP_KEY,e).then(function(){return t.isDirty=!1})},Je.prototype.getDeviceId=function(){return this.storage.getItem(qe.DEVICE_IID_KEY)},Je.prototype.getSFP=function(){return this.storage.getItem(qe.DEVICE_SFP_KEY)},Je.prototype.clearDeviceId=function(){this.storage.removeItem(qe.DEVICE_IID_KEY)},Je.prototype.getSAMLNameID=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();var e=this.searchForFirstValidAuthenticationToken();return e?e.getProperty("simpleSamlNameID"):null},Je.prototype.getSAMLSessionIndex=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();var e=this.searchForFirstValidAuthenticationToken();return e?e.getProperty("simpleSamlSessionIndex"):null},Je.prototype.clearStorage=function(e){void 0===e&&(e=!0),this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdID(null),this.entitlementToken.setCanAuthenticate(!1),e&&(f.a.warn("Storage content was reset!"),this.entitlementToken.setAuthenticationTokens([]),this.entitlementToken.setUserMetadata({})),this.entitlementToken.setAuthorizationTokens([]),this.saveEntitlementTokenToStorage(this.entitlementToken)},Je.prototype.resetStorage=function(){this.isDirty=!0,f.a.warn("Storage content was reset!"),this.saveDataToStorage(null,qe.APPLICATION_REGISTRATION),this.saveDataToStorage(null,qe.ACCESS_TOKEN),this.saveDataToStorage(null,qe.REG_CODE),this.entitlementToken=new J,this.saveEntitlementTokenToStorage(this.entitlementToken)},Je.prototype.ditchTokens=function(){this.switchToSessionStorage(),this.resetStorage(),this.switchToLocalStorage(),this.resetStorage(),Ve.CACHE=null},Je.prototype.searchForAuthenticationTokenForRequestor=function(e){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t=null,n=0,o=this.entitlementToken.getAuthenticationTokens();n<o.length;n++){var r,i=o[n];if((r=new K(i)).getRequestorID()===e){t=r;break}}return t},Je.prototype.searchForFirstValidAuthenticationToken=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var e=null,t=0,n=this.entitlementToken.getAuthenticationTokens();t<n.length;t++){var o,r=n[t];if((o=new K(r)).isValid()){e=o;break}}return e},Je.prototype.searchForFirstAuthenticationToken=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var e=null,t=0,n=this.entitlementToken.getAuthenticationTokens();t<n.length;t++){var o=n[t],e=new K(o);break}return e},Je.prototype.loadEntitlementTokenFromStorage=function(){var e=null,t=new J;try{var n=this.storage.getItem(this.storagePrimaryKey);n&&(e=JSON.parse(n))}catch(e){f.a.error(e),f.a.warn("Storage content was invalid when trying to convert from String to JSON Object!")}return e?N.isEmpty(e)?(f.a.warn("Storage content was an empty JSON Object!"),this.resetStorage(),new J):(t.loadEntitlementTokenFromJSONObject(e),t.isEntitlementTokenContentValid()?t:(f.a.warn("Storage content was invalid when trying to validate entitlement token content!"),this.resetStorage(),new J)):(f.a.warn("Storage content was missing, null or couldn't be parsed!"),this.resetStorage(),new J)},Je.prototype.saveEntitlementTokenToStorage=function(t){var n=this;try{this.storageType===Ye.MEMORY_STORAGE&&this.isLocalStorageSpaceEnabled()&&(this.storagePrimaryKeyBeforeSwitchingToMemoryStorage===qe.LOCAL_STORAGE_PRIMARY_KEY?(f.a.warn("Switch to local storage from memory storage!"),this.storageType=Ye.LOCAL_STORAGE,this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY):(f.a.warn("Switch to session storage from memory storage!"),this.storageType=Ye.SESSION_STORAGE,this.storagePrimaryKey=qe.SESSION_STORAGE_PRIMARY_KEY),this.storage=this.internalLocalStorage),this.storage.setItem(this.storagePrimaryKey,JSON.stringify(t)),this.storageType!==Ye.MEMORY_STORAGE&&this.pm.postStorage("setItem",this.storagePrimaryKey,JSON.stringify(t)).then(function(){var e=n.getDeviceId();N.isEmpty(e)||n.pm.postStorage("setItem",qe.DEVICE_IID_KEY,e),n.isDirty=!1})}catch(e){f.a.error(e),t=this.sanitizeEntitlementToken(t);try{this.storage.setItem(this.storagePrimaryKey,JSON.stringify(t)),this.pm.postStorage("setItem",this.storagePrimaryKey,JSON.stringify(t)).then(function(){var e=n.getDeviceId();N.isEmpty(e)||n.pm.postStorage("setItem",qe.DEVICE_IID_KEY,e),n.isDirty=!1})}catch(e){f.a.error(e),f.a.warn("Web browser localStorage space is still exceeded, switch to using memory storage!"),this.storagePrimaryKeyBeforeSwitchingToMemoryStorage=this.storagePrimaryKey,this.storageType=Ye.MEMORY_STORAGE,this.storagePrimaryKey=qe.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage,this.storage.setItem(this.storagePrimaryKey,JSON.stringify(t))}}},Je.prototype.loadDataFromStorage=function(t){var e=null,n=Ae.createEmptyDataObject(t);try{var o=this.storage.getItem(t);o&&(e=JSON.parse(o))}catch(e){return f.a.warn("Storage data was invalid when trying to convert from String to JSON Object!",t),null}return e?(n.copyFromJSONObject(e),n.isValid()?n:(f.a.warn("Storage data was invalid when trying to validate content!",t),null)):(f.a.warn("Storage data was missing, null or couldn't be parsed!",t),null)},Je.prototype.saveDataToStorage=function(t,n){try{this.storage.setItem(n,JSON.stringify(t))}catch(e){f.a.error(e),f.a.warn("Web browser localStorage space is exceeded, switch to using memory storage!"),this.storagePrimaryKeyBeforeSwitchingToMemoryStorage=this.storagePrimaryKey,this.storageType=Ye.MEMORY_STORAGE,this.storagePrimaryKey=qe.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage,this.storage.setItem(n,JSON.stringify(t))}},Je.prototype.isLocalStorageSpaceEnabled=function(){try{return this.internalLocalStorage=localStorage,!0}catch(e){return Je.error=H.LS011,!1}},Je.prototype.isLocalStorageSpaceAvailable=function(){try{return this.internalLocalStorage.setItem("canWrite","test"),this.internalLocalStorage.removeItem("canWrite"),this.internalLocalStorage.setItem("canWrite","yes"),"yes"===this.internalLocalStorage.getItem("canWrite")||(Je.error=H.LS011,!1)}catch(e){return Je.error=H.LS011,!1}},Je.prototype.startTimer=function(){var e=this;setTimeout(function(){return e.syncStorage()},1e3)},Je.prototype.sanitizeEntitlementToken=function(e){for(var t=e.getAuthenticationTokens(),n=0;n<t.length;)new K(t[n]).isValid()?n++:t.splice(n,1);for(var o=e.getAuthorizationTokens(),n=0;n<o.length;)new K(o[n]).isValid()?n++:o.splice(n,1);return e},Je);function Je(){this.internalMemoryStorage=new B,this.pm=new ne.a(tt.globalOptions.proxyURL,window.accessEnablerProxy.contentWindow),this.isLocalStorageSpaceEnabled()&&this.isLocalStorageSpaceAvailable()?(this.storageType=Ye.LOCAL_STORAGE,this.storagePrimaryKey=qe.LOCAL_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage):(f.a.warn("Web localStorage is not enabled or not available, switch to using memory storage!"),this.storageType=Ye.MEMORY_STORAGE,this.storagePrimaryKey=qe.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage),this.storage.setItem(qe.STORAGE_VERSION_KEY,2),this.storageType!==Ye.MEMORY_STORAGE&&this.pm.postStorage("setItem",qe.STORAGE_VERSION_KEY,2)}var We=i(2),Xe=($e.getInstance=function(){return this.instance||(this.instance=new $e),this.instance},$e.prototype.obtainAccessToken=function(){var o=this;return new Promise(function(t,n){var e=o.storageManager.getAccessToken();null!=e?t(e):o.obtainApplicationRegistration().then(function(e){o.retrieveAccessToken(e).then(function(e){t(e)},function(e){n(e)})},function(e){n(e)})})},$e.prototype.obtainApplicationRegistration=function(){var o=this;return new Promise(function(t,n){var e=o.storageManager.getApplicationRegistration();null!=e?t(e):o.retrieveApplicationRegistration().then(function(e){t(e)},function(e){n(e)})})},$e.prototype.retrieveAccessToken=function(e){var o=this;return new Promise(function(n,t){o.httpService.post(c.ACCESS_TOKEN_ENDPOINT_PATH,{grant_type:oe.CLIENT_CREDENTIALS,client_id:e.getClientId(),client_secret:e.getClientSecret()},{url:new We(Ot.context.spAdobeServicesUrl,null,!0).origin,dataType:"application/x-www-form-urlencoded"}).then(function(e){var t=new de(e.data);o.storageManager.setAccessToken(t),n(t)},function(e){400!==e.status&&401!==e.status&&$e.RETRY_RETRIEVING_ACCESS_TOKEN?($e.RETRY_RETRIEVING_ACCESS_TOKEN=!1,o.retrieveApplicationRegistration().then(function(e){o.retrieveAccessToken(e).then(function(e){n(e)},function(e){t(e)})},function(e){t(e)})):t(H.R401)})})},$e.prototype.retrieveApplicationRegistration=function(){var o=this;return new Promise(function(n,t){o.httpService.post(c.CLIENT_REGISTRATION_ENDPOINT_PATH,{software_statement:Ot.getInstance().softwareStatement},{url:new We(Ot.context.spAdobeServicesUrl,null,!0).origin,dataType:"json"}).then(function(e){var t=new se(e.data);o.storageManager.setApplicationRegistration(t),n(t)},function(e){400!==e.status&&401!==e.status&&$e.RETRY_RETRIEVING_APPLICATION_REGISTRATION?($e.RETRY_RETRIEVING_APPLICATION_REGISTRATION=!1,o.retrieveApplicationRegistration().then(function(e){n(e)},function(e){t(e)})):t(H.R400)})})},$e.RETRY_RETRIEVING_ACCESS_TOKEN=!0,$e.RETRY_RETRIEVING_APPLICATION_REGISTRATION=!0,$e);function $e(){this.httpService=rt.getInstance(),this.storageManager=Qe.getInstance()}var et=i(2),tt=(nt.prototype.send=function(){f.a.debug("Sending XHR request: ",this.options),this.xhr.send(this.options.body)},nt.prototype.setOptions=function(e){this.options=N.extend(Object.create(nt.globalOptions),this.defaultOptions,e),e.data&&(this.options.data=N.extend({},this.defaultOptions.data,e.data)),e.headers&&(this.options.headers=N.extend({},this.defaultOptions.headers,e.headers)),this.urlObject=new et(this.options.url,null,!1)},nt.prototype.setCookies=function(){for(var e in this.options.cookies)this.options.cookies.hasOwnProperty(e)&&(N.isEmpty(this.options.cookies[e])?document.cookie=e+"= ;Secure ;SameSite=None ;path=/ ;expires=Thu, 01 Jan 1970 00:00:00 UTC;":document.cookie=e+"="+this.options.cookies[e]+" ;Secure ;SameSite=None ;path=/")},nt.prototype.setCache=function(){var e;this.options.cache||(e="_="+(new Date).getTime(),this.urlObject.query&&1<this.urlObject.query.length?this.urlObject.query+="&"+e:this.urlObject.query=e)},nt.prototype.setData=function(){var e;N.isEmpty(this.options.data)||(e=C.param(this.options.data,this.options.traditional),"POST"===this.options.type?"json"===this.options.dataType?this.options.body=JSON.stringify(this.options.data):this.options.body=e:(this.urlObject.query&&1<this.urlObject.query.length?this.urlObject.query+="&"+e:this.urlObject.query=e,this.options.body=null,this.options.url=this.urlObject.toString()))},nt.prototype.setXHR=function(){var a=this;this.xhr=new XMLHttpRequest,this.xhr.withCredentials=!0,this.xhr.open(this.options.type,this.options.url,this.options.async),this.options.async&&(this.xhr.timeout=this.options.timeout),this.xhr.onreadystatechange=function(e){var n,t=e.target;if(a.options.data&&a.options.data.resource_id&&(t.resourceId=a.options.data.resource_id),4===t.readyState){t.getAllResponseHeaders&&(n={},t.getAllResponseHeaders().split("\r\n").map(function(e){var t=e.split(": ");2===t.length&&(n[t[0].toLowerCase()]=t[1])}),t.responseHeaders=n),f.a.debug("Receiving XHR response: ",t);var o=200<=t.status&&t.status<400,r=o?a.options.success:a.options.error,i="xml"===a.options.dataType?t.responseXML:t.responseText;if(!o&&a.retry){if(401===t.status)return void a.retryAjaxDueToInvalidAuthorization();if(400===t.status&&("34763"===H.getReasonFromErrorResponse(t.responseText)||"34764"===H.getReasonFromErrorResponse(t.responseText)))return void a.retryAjaxDueToInvalidIndividualization()}r.apply(a.options.context,[i,e.target.status,t])}}},nt.prototype.setHeaders=function(){if("POST"===this.options.type&&("json"===this.options.dataType?this.xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"):this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),this.options.headers)for(var e in this.options.headers)this.options.headers.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.headers[e]);this.options.dataType&&this.mimeTypes[this.options.dataType]&&this.xhr.setRequestHeader("Accept",this.mimeTypes[this.options.dataType])},nt.prototype.retryAjaxDueToInvalidAuthorization=function(){var t=this;f.a.warn("Ajax call failed due to invalid authorization. Will invalidate application registration and access token!"),Qe.getInstance().setApplicationRegistration(null),Qe.getInstance().setAccessToken(null),Xe.getInstance().obtainAccessToken().then(function(e){f.a.warn("Will retry the Ajax call with new access token!"),t.options.headers.Authorization="Bearer "+e.getAccessToken(),new nt(t.options,!1).send()},function(e){t.options.error(e,H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},nt.prototype.retryAjaxDueToInvalidIndividualization=function(){var t=this;f.a.warn("Ajax call failed due to invalid device individualization. Will invalidate device individualization!"),Qe.getInstance().clearDeviceId(),we.getInstance().getDeviceId().then(function(e){f.a.warn("Will retry the Ajax call with new device individualization!"),t.options.headers.ap_21=e,new nt(t.options,!1).send()},function(e){t.options.error(e,H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},nt.globalOptions={proxyURL:"AccessEnablerProxy.html"},nt.globalHeaders={},nt.globalCookies={client_type:"html5",client_version:"4.5.0"},nt.globalData={},nt);function nt(e,t){void 0===t&&(t=!0),this.defaultOptions={url:window.location.href,async:!0,cache:!1,type:"GET",context:this,dataType:"xml",timeout:3e4,body:{},data:nt.globalData,headers:nt.globalHeaders,cookies:nt.globalCookies,traditional:!1},this.mimeTypes={xml:"application/xml",json:"application/json",text:"*/*"},this.retry=t,this.setOptions(e),this.setCookies(),this.setCache(),this.setData(),this.setXHR(),this.setHeaders()}var ot=i(5),rt=(it.getInstance=function(){return this.instance||(this.instance=new it),this.instance},it.getRequiredHeaders=function(h){var g=this;return new Promise(function(n,t){var o=JSON.parse(JSON.stringify(we.getInstance().getDeviceInfo())),e=Qe.getInstance().getSAMLNameID();e&&(o.ap_19=e);var r=Qe.getInstance().getSAMLSessionIndex();r&&(o.ap_23=r),o["AP-SDK-Identifier"]="js/4.5.0";var i=JSON.stringify(we.getInstance().getXDeviceInfo());function a(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];if(-1!==h.indexOf(o))return!0}return!1}o["X-Device-Info"]=ot.Base64.encode(i);var s,c=a(it.ENDPOINTS_REQUIRING_DEVICE_ID_HEADER);a(it.ONE_API_ENDPOINTS)&&(s=g.getSessionIdentifierHeader(),o["AP-Session-Identifier"]="token "+s);var u=a(it.ENDPOINTS_REQUIRING_ACCESS_TOKEN_HEADER),l=function(){Xe.getInstance().obtainAccessToken().then(function(e){o.Authorization="Bearer "+e.getAccessToken(),a(it.ONE_API_ENDPOINTS)?d():n(o)},function(e){t({data:e,status:H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})})},d=function(){Se.getInstance().getFingerprint().then(function(e){var t=g.getDeviceIdentifierHeader(e);o["AP-Device-Identifier"]="legacy "+t,n(o)},function(e){f.a.warn("[INTERNAL] Failed to compute fingerprint."),t()})};c?we.getInstance().getDeviceId().then(function(e){o.ap_21=e,o.pass_sfp=Qe.getInstance().getSFP(),u?l():a(it.ONE_API_ENDPOINTS)?d():n(o)},function(e){t({data:e,status:H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})}):u?l():n(o)})},it.getDeviceIdentifierHeader=function(e){var t=we.getDeviceIdentifier(e);return ot.Base64.encode(JSON.stringify(t))},it.getSessionIdentifierHeader=function(){var e=Qe.getInstance().getAuthenticationToken().getSource();return ot.Base64.encode(e)},it.prototype.ajax=function(t,n,i){var a,s=this;return void 0===i&&(i={}),new Promise(function(o,r){it.getRequiredHeaders(t).then(function(e){a=new s.ajaxReference({type:i.method||"GET",url:i.url?""+i.url+t:""+Ot.context.spAdobeServicesUrl+t,data:n,dataType:i.dataType||"json",success:function(e,t,n){o({data:e,status:t,xhr:n})},error:function(e,t,n){r({data:e,status:t,xhr:n})},headers:e,context:i.context||s,traditional:i.traditional||!1});try{a.send()}catch(e){r(e)}},function(e){r(e)})})},it.prototype.post=function(e,t,n){return void 0===n&&(n={}),n.method="POST",this.ajax(e,t,n)},it.prototype.get=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),n.method="GET",this.ajax(e,t,n)},it.prototype.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),n.method="DELETE",this.ajax(e,t,n)},it.prototype.put=function(e,t,n){return void 0===n&&(n={}),n.method="PUT",this.ajax(e,t,n)},it.ENDPOINTS_REQUIRING_DEVICE_ID_HEADER=[c.AUTHENTICATION_TOKEN_ENDPOINT_PATH,c.AUTHORIZATION_TOKEN_ENDPOINT_PATH,c.MEDIA_TOKEN_ENDPOINT_PATH],it.ENDPOINTS_REQUIRING_ACCESS_TOKEN_HEADER=[c.INDIVIDUALIZATION_ENDPOINT_PATH,c.CONFIG_ENDPOINT_PATH,c.AUTHENTICATION_ENDPOINT_PATH,c.AUTHENTICATION_TOKEN_ENDPOINT_PATH,c.AUTHORIZATION_TOKEN_ENDPOINT_PATH,c.MEDIA_TOKEN_ENDPOINT_PATH,c.PREAUTHORIZATION_ENDPOINT_PATH,c.LOGOUT_ENDPOINT_PATH,c.DEVICE_ID_ENDPOINT_PATH,c.USER_METADATA_ENDPOINT_PATH,c.REG_CODE_ENDPOINT_PATH],it.ONE_API_ENDPOINTS=[""+s.V1+c.PREAUTHORIZATION_ENDPOINT_PATH],it);function it(){this.ajaxReference=tt}var at=(st.prototype.retrieveConfiguration=function(e){var t=this;st.numberOfConfigCalls++,e&&Array.isArray(e)&&0<e.length&&Ot.context.configureServiceProviderUrl(e[0]),rt.getInstance().get(c.CONFIG_ENDPOINT_PATH+"/"+Ot.context.requestorId,{},{dataType:"xml"}).then(function(e){return t.onRetrieveConfiguration(e.data,e.status)},function(e){return t.onRetrieveConfiguration(e.data,e.status)})},st.prototype.onRetrieveConfiguration=function(e,t){if(--st.numberOfConfigCalls,200!==t){if(Ot.context.validRequestorId=!1,t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)return void Ot.context.callbackManager.onErrorHandler(e);if(f.a.error("Invalid configuration response: HTTP",t),Ot.context.callbackManager.onErrorHandler(0===t?H.SEC420:H.buildError(H.PREFIX_CFG+t)),410===t)return void Ot.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,l.SERVER_API_TOO_OLD_ERROR_STATUS)}else Ot.context.validRequestorId=!0;E.checkPendingLogout(e)&&Ot.context.storageManager.ditchTokens();var n=0;_.getNode("time",e)&&(n=parseInt(_.getNodeText("time",e),10),f.a.debug("Server time:",n));var o,r=(new Date).getTime();n&&0<n&&(59e3<(o=r-n)||o<-59e3)&&Ot.context.callbackManager.onErrorHandler(H.CFG100),""===Ot.context.deviceInfo.deviceType&&_.getNode("device",e)&&(Ot.context.deviceInfo.deviceType=_.getNodeText("device",e)),""===Ot.context.deviceInfo.clientType&&_.getNode("clientType",e)&&(Ot.context.deviceInfo.clientType=_.getNodeText("clientType",e)),""===Ot.context.deviceInfo.os&&_.getNode("os",e)&&(Ot.context.deviceInfo.os=_.getNodeText("os",e));var i=new k(e),a=i.getMvpds();Ot.context.clientInfo.callSetConfig()&&(st.configurationString=i.getConfigForProgrammer());for(var s=0,c=a;s<c.length;s++)c[s].serviceProvider=Ot.context.spUrl;ee.getInstance().setRequestorMVPDs(a),!0===X.a.isPendingAuthenticationCookieSet()?(X.a.setPendingAuthenticationCookieState(!1),Ot.context.userProfileService.retrieveAuthenticationToken(function(e){return Ot.context.userProfileService.onAuthenticationTokenSuccessful(e)},function(e,t,n,o){return Ot.context.userProfileService.onAuthenticationTokenError(e,t,n,o)})):0===st.numberOfConfigCalls&&(f.a.debug("Configuration INITIALIZED"),this.onConfigurationInitialized())},st.prototype.onConfigurationInitialized=function(){var e=Ot.context.mvpdManager.getCurrentSP();N.isEmpty(e)||Ot.context.configureServiceProviderUrl(e);var t=Ot.context.mvpdManager.getCurrentMvpdID(),n=Ot.context.mvpdManager.getMvpdByID(t);Ot.context.mvpdManager.switchToCurrentMvpdStorageType(t),n&&n.authPerAggregator&&n.passiveAuthnEnabled&&null===Ot.context.storageManager.getAuthenticationToken()&&Ot.context.storageManager.searchForFirstValidAuthenticationTokenForCurrentMvpd()?(Ot.context.callbackManager.onErrorHandler(H.N001),Ot.context.userProfileService.startPassiveAuthentication()):this.onConfigurationInitializedComplete()},st.prototype.onConfigurationInitializedComplete=function(){var e;T.removeGenericEventListener("configInit",this.onConfigurationInitialized),st.configurationInitialized=!0,Ot.context.clientInfo&&Ot.context.clientInfo.callSetConfig()&&(e=(e=st.configurationString)||"",Ot.context.callbackManager.callCallback(u.CONFIGURATION_STATUS_CALLBACK,e));for(var t=0,n=Ue.pendingCallsQueue;t<n.length;t++){var o=n[t];f.a.debug("Executing pending call: ",o),o.execute()}Ue.pendingCallsQueue.length=0},st.configurationInitialized=!1,st.configurationString=null,st.numberOfConfigCalls=0,st);function st(){}var ct,ut,lt=(dt.prototype.callSetConfig=function(){return this.clientInfo.callSetConfig},dt.prototype.getVisitorID=function(){return this.clientInfo.visitorID},dt.prototype.getAdID=function(){return this.clientInfo.adID},dt.prototype.isBackgroundLogin=function(){return this.clientInfo.backgroundLogin},dt.prototype.isBackgroundLogout=function(){return this.clientInfo.backgroundLogout},dt.prototype.getMvpdConfig=function(){return this.mvpdConfigs},dt.prototype.isIFrameRequiredForMvpd=function(e){var t=this.mvpdConfigs[e];return t?t.iFrameRequired:null},dt.prototype.parseClientInfo=function(e){for(var t in this.clientInfo)e&&e.hasOwnProperty(t)&&typeof this.clientInfo[t]==typeof e[t]&&(this.clientInfo[t]=e[t])},dt.prototype.parseMvpdConfig=function(e){var t=e&&e.mvpdConfig;if(!N.isEmpty(t))for(var n in f.a.debug(t),t)if(t.hasOwnProperty(n)){var o=t[n],r={};for(var i in this.mvpdConfigDefault)o&&o.hasOwnProperty(i)&&typeof this.mvpdConfigDefault[i]==typeof o[i]&&(r[i]=o[i]);r!=={}&&(this.mvpdConfigs[n]=N.extend({},this.mvpdConfigDefault,r))}},dt.APPLICATION_ID="applicationId",dt);function dt(e){this.info=e,this.clientInfo={callSetConfig:!1,backgroundLogin:!1,backgroundLogout:!1,visitorID:"",adID:""},this.mvpdConfigs={},this.mvpdConfigDefault={iFrameRequired:!1,iFrameWidth:0,iFrameHeight:0},this.parseClientInfo(e),this.parseMvpdConfig(e),f.a.debug("Parsed ClientInfo data",this.clientInfo,this.mvpdConfigs)}(ut=ct=ct||{}).LOCAL_CACHE="LOCAL_CACHE",ut.REMOTE_CACHE="REMOTE_CACHE";var ht=(gt.getBuilder=function(){return new pt},gt.prototype.getResources=function(){return this._resources},gt.prototype.hasFeature=function(e){return this._features.has(e)},gt);function gt(e){this._resources=e.getResources(),this._features=e.getFeatures()}var pt=(Tt.prototype.setResources=function(e){return this._resources=e,this},Tt.prototype.getResources=function(){return this._resources},Tt.prototype.disableFeatures=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=e;n<o.length;n++){var r,i=o[n];i in ct&&(r=i.toUpperCase().trim(),this._features.delete(r))}return this},Tt.prototype.getFeatures=function(){return this._features},Tt.prototype.build=function(){return new ht(this)},Tt);function Tt(){this._features=new Set([ct.LOCAL_CACHE,ct.REMOTE_CACHE])}var ft,At,Et=((ft=function(e,t){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ft(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(It,At=function(e){this.status=e._status}),It.getBuilder=function(){return new St},It);function It(e){var t=At.call(this,e)||this;return t.decisions=[],t.decisions=e.resources,t}var St=(vt.prototype.setDecisions=function(e){return this._decisions=e,this},vt.prototype.setStatus=function(e){return this._status=e,this},Object.defineProperty(vt.prototype,"resources",{get:function(){return this._decisions},enumerable:!1,configurable:!0}),Object.defineProperty(vt.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),vt.prototype.build=function(){return new Et(this)},vt.prototype.buildFromStringArray=function(e){for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n],i=new ye(r,!0);t.push(i)}return this._decisions=t,new Et(this)},vt);function vt(){this._decisions=[]}var _t=(mt.getByCode=function(e){var t=new mt;switch(e){case"access_token_unavailable":t.status=0,t.code="access_token_unavailable",t.message="The request failed due to an unexpected error while retrieving the access token. Please check the validity of your software statement and custom scheme.",t.action="authentication";break;case"requestor_not_configured":t.status=0,t.code="requestor_not_configured",t.message="The requestor is not yet configured which is a prerequisite for using any API apart from the setRequestor API.",t.action="retry";break;case"authentication_session_expired":t.status=0,t.code="authentication_session_expired",t.message="The current authentication session has expired. The user must re-authenticate with a supported MVPD in order to continue.",t.action="authentication";break;case"authentication_session_missing":t.status=0,t.code="authentication_session_missing",t.message="The authentication session associated with this request could not be retrieved. The user must re-authenticate with a supported MVPD in order to continue.",t.action="authentication";break;case"server_response_format_unknown":t.status=0,t.code="server_response_format_unknown",t.message="The request failed due to an unknown server response format. Please capture the device console logs and contact support.",t.action="none";break;case"network_error":t.status=0,t.code="network_error",t.message="The request failed due to a network error. If the issue persists over several retries, please capture the device console logs and contact support.",t.action="none";break;default:t.status=0,t.code="internal_sdk_error",t.message="Unfortunately the AccessEnabler SDK hit an internal error state. Please capture the AccessEnabler SDK console logs and contact Adobe's support.",t.action="none"}return t},mt);function mt(e,t,n,o,r,i,a){this.status=e,this.code=t,this.message=n,this.details=o,this.helpUrl=r,this.trace=i,this.action=a}var Rt=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(a=(i<3?r(a):3<i?r(t,n,a):r(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},yt=i(6),Ct=i(2),Ot=(Pt.getInstance=function(e){return this.instance||(this.instance=new Pt(e)),this.instance},Pt.prototype.loadAccessEnablerProxy=function(){var e=this,t=function(){if(e._scriptUrl)switch(e._scriptUrl.hostname){case"entitlement.auth.adobe.com":return f.a.info("Environment: PRODUCTION"),"sp.auth.adobe.com";case"entitlement.auth-staging.adobe.com":return f.a.info("Environment: STAGING"),"sp.auth-staging.adobe.com";default:return f.a.info("Environment: CUSTOM"),e._scriptUrl.host}}();f.a.info("Loading AccessEnablerProxy.js from: "+t);var n=this._scriptUrl.pathname.replace("AccessEnabler.js","");tt.globalOptions.proxyURL="https://"+t+n+"AccessEnablerProxy.html";var o=tt.globalOptions.proxyURL+"?"+i.h;T.isDebug(this._scriptUrl)&&(o+="&debug"),o+="#"+encodeURIComponent(document.location.href),window.accessEnablerProxy=document.createElement("iframe"),accessEnablerProxy.setAttribute("name","adobeIFrame"),accessEnablerProxy.setAttribute("id","adobeIFrame"),accessEnablerProxy.setAttribute("style","display:none"),accessEnablerProxy.setAttribute("src",o),_.appendChild(accessEnablerProxy)},Pt.prototype.completeBackgroundLogin=function(){f.a.debug("Completing background login!");var e=Pt.context.mvpdManager.getCurrentMvpd();e&&e.iFrameRequired&&!e.tempPass&&Pt.context.callbackManager.callCallback(u.DESTROY_IFRAME_STATUS_CALLBACK),Pt.context.userProfileService.retrieveAuthenticationToken(function(e){return Pt.context.userProfileService.onAuthenticationTokenSuccessful(e)},function(e,t,n,o){return Pt.context.userProfileService.onAuthenticationTokenError(e,t,n,o)})},Pt.prototype.completePassiveLogin=function(){f.a.debug("Completing passive login!"),Pt.context.userProfileService.completePassiveAuthentication()},Pt.prototype.completeBackgroundLogout=function(){f.a.debug("[LOGOUT] Completing background logout."),Pt.context.backgroundLogoutInProgress=!1,Pt.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,""),Pt.context.callbackManager.onErrorHandler(H.N000)},Object.defineProperty(Pt.prototype,"softwareStatement",{get:function(){return this._softwareStatement},enumerable:!1,configurable:!0}),Pt.prototype.setRequestor=function(e){void 0===e&&(e="");for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];N.isEmpty(Qe.error)||(Pt.context.callbackManager.onErrorHandler(Qe.error),Qe.error=null);var o=null,r={};yt(t,function(e){Array.isArray(e)?o=e:r=e}),r.callSetConfig="function"==typeof setConfig,Pt.context.clientInfo=new lt(r);var i=Pt.context.clientInfo.getVisitorID();N.isEmpty(i)||(tt.globalData[d.KEY_VISITOR_ID]=i);var a=Pt.context.clientInfo.getAdID();N.isEmpty(a)||(tt.globalData[d.KEY_AD_ID]=a);var s=r[lt.APPLICATION_ID];Pt.context.applicationId=N.isUndefined(s)||N.isEmpty(s)?null:s,Ve.CACHE=null,Pt.context.requestorId=String(e),f.a.debug("Processing setRequestor(): ",Pt.context.requestorId,o),Pt.context.configurationService.retrieveConfiguration(o)},Pt.prototype.setSelectedProvider=function(e){at.configurationInitialized?(f.a.debug("Processing setSelectedProvider(): ",e),e&&0<e.length?Pt.context.interactiveAuthenticationInProgress?(Pt.context.mvpdManager.setCurrentMvpdID(e),Pt.context.storageManager.setMvpdSelection(Z.USER_SELECTION),Pt.context.callbackManager.sendTrackingData(l.TRACK_MVPD_SELECTION),Pt.context.userProfileService.goToMvpdLoginPage()):(String(e)===Pt.context.mvpdManager.getCurrentMvpdID()?Pt.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,1,l.PROVIDER_ALREADY_AUTHENTICATED_INFO_STATUS):Pt.context.userProfileService.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS,H.N500),Pt.context.userProfileService.authenticationGeneralCleanup()):(Pt.context.mvpdManager.setCurrentMvpdID(null),Pt.context.storageManager.setMvpdSelection(Z.UNKNOWN_SELECTION),Pt.context.userProfileService.sendAuthenticationFailCallbacks(l.PROVIDER_NOT_SELECTED_ERROR_STATUS,H.N005),Pt.context.userProfileService.authenticationGeneralCleanup())):(f.a.debug("Put setSelectedProvider() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.setSelectedProvider,e)))},Pt.prototype.getSelectedProvider=function(){var e,t,n,o;at.configurationInitialized?(f.a.debug("Processing getSelectedProvider()"),e="New User",!(t=Pt.context.mvpdManager.getCurrentMvpdID())||(n=Pt.context.storageManager.getAuthenticationToken())&&((o=n.getSubMVPDID())&&""!==o&&(t=o),e=n.isValid()?"User Authenticated":"User Not Authenticated"),Pt.context.callbackManager.callCallback(u.SEND_SELECTED_MVPD_STATUS_CALLBACK,{MVPD:t,AE_State:e})):(f.a.debug("Put getSelectedProvider() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.getSelectedProvider)))},Pt.prototype.getProxyMVPD=function(){var e,t,n,o;at.configurationInitialized?(f.a.debug("Processing getProxyMVPD()"),e=null,(t=Pt.context.storageManager.getAuthenticationToken())&&(n=t.getMvpdID(),o=t.getSubMVPDID(),n&&o&&""!==n&&""!==o&&(e=n)),Pt.context.callbackManager.callCallback(u.SEND_SELECTED_MVPD_PROXY_STATUS_CALLBACK,e)):(f.a.debug("Put getProxyMVPD() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.getProxyMVPD)))},Pt.prototype.autoLogin=function(e){at.configurationInitialized?(f.a.debug("Processing autoLogin(): ",e),Pt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?Pt.context.userProfileService.sendAuthenticationSuccessCallbacks():e&&e.mvpdID&&Pt.context.mvpdManager.isMvpdValid(e.mvpdID)?Pt.context.userProfileService.startNonInteractiveAuthentication(e.mvpdID):Pt.context.userProfileService.sendAuthenticationFailCallbacks(l.PROVIDER_NOT_AVAILABLE_ERROR_STATUS,H.N404)):(f.a.debug("Put autoLogin() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.autoLogin,e)))},Pt.prototype.getAuthentication=function(e,t){void 0===e&&(e=void 0),void 0===t&&(t=void 0),at.configurationInitialized?(f.a.debug("Processing getAuthentication(): ",e,t),e&&(Pt.context.redirectUrl=e),t&&(Pt.context.authenticationExtraParameters=t),Pt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?Pt.context.userProfileService.sendAuthenticationSuccessCallbacks():Pt.context.userProfileService.startInteractiveAuthentication()):(f.a.debug("Put getAuthentication() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.getAuthentication,e,t)))},Pt.prototype.checkAuthentication=function(){var e,t;at.configurationInitialized?(f.a.debug("Processing checkAuthentication()"),(e=Pt.context.userProfileService.getClientAuthenticationStatus())===l.USER_AUTHENTICATED_STATUS?(Pt.context.mvpdManager.getMvpdByID(Pt.context.storageManager.getMvpdID()).tempPass&&Pt.context.callbackManager.onErrorHandler(H.N011),Pt.context.storageManager.getAuthenticationToken().isAuthNAll()&&Pt.context.callbackManager.onErrorHandler(H.N010),Pt.context.userProfileService.sendAuthenticationSuccessCallbacks()):(t=e===l.USER_NOT_AUTHENTICATED_ERROR_STATUS?H.N000:H.N500,Pt.context.userProfileService.sendAuthenticationFailCallbacks(e,t))):(f.a.debug("Put checkAuthentication() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.checkAuthentication)))},Pt.prototype.getAuthorization=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0),at.configurationInitialized?(f.a.debug("Processing getAuthorization(): ",e,t,n),Pt.context.resourceId=e,Pt.context.authorizationExtraParameters=n,Pt.context.methodInvokingAuthorization="getAuthorization",Pt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?Pt.context.decisionService.startAuthorization(Pt.context.resourceId,Pt.context.authorizationExtraParameters):(Pt.context.pendingAuthorizationInProgress=!0,this.getAuthentication([t,Pt.context.authorizationExtraParameters]))):(f.a.debug("Put getAuthorization() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.getAuthorization,e,t,n)))},Pt.prototype.checkAuthorization=function(e,t){void 0===t&&(t=void 0),at.configurationInitialized?(f.a.debug("Processing checkAuthorization(): ",e,t),Pt.context.resourceId=e,Pt.context.authorizationExtraParameters=t,Pt.context.methodInvokingAuthorization="checkAuthorization",Pt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?Pt.context.decisionService.startAuthorization(Pt.context.resourceId,Pt.context.authorizationExtraParameters):Pt.context.decisionService.onRetrieveAuthorizationTokenError(null,null,{code:l.USER_NOT_AUTHENTICATED_ERROR_STATUS,message:"",resourceId:e})):(f.a.debug("Put checkAuthorization() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.checkAuthorization,e,t)))},Pt.prototype.checkPreauthorizedResources=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=!0),at.configurationInitialized){f.a.debug("Processing retrievePreauthorizationDecisions(): ",e,t);var n=Pt.context.storageManager.getAuthenticationToken();if(n&&n.isValid()){var i,o=n.getAuthorizedResources();if(o&&0<o.length){for(var r=[],a=0,s=o.length;a<s;a++)r.push(o[a].getAuthorizedResourceID().toUpperCase());var c=Pt.context.decisionService.intersectPreflight(e,r);Pt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,c)}else t&&Pt.context.decisionService.isPreauthorizationCacheValid(e)?Pt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,Pt.context.decisionService.getAuthorizedResourcesFromPreauthorizationCache()):(i=function(e,t){t===H.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(f.a.warn("/preauthorize call was not made - returning empty preauthorizedResources array"),Pt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,[]),Pt.context.callbackManager.onErrorHandler(e)):(f.a.warn("/preauthorize call failed - returning empty preauthorizedResources array"),Pt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,[]),Pt.context.callbackManager.onErrorHandler(H.P100))},Pt.context.decisionService.retrievePreauthorizationDecisions(e,function(e,t){var n,o,r;200===t?(n=[],o=[],e&&(r=_.getNodes("resource",e),yt(r,function(e){var t={id:_.getNodeText("id",e),authorized:"true"===_.getNodeText("authorized",e).toLowerCase()};n.push(t),t.authorized&&o.push(t.id)})),Pt.context.storageManager.setPreauthorizationCache(n),Pt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,o)):i(e,t)},i))}}else f.a.debug("Put retrievePreauthorizationDecisions() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.checkPreauthorizedResources,e,t))},Pt.prototype.preauthorize=function(e,l){if(f.a.debug("[PREAUTHORIZE] Processing request: "+JSON.stringify(e)),null!=e&&null!=l){var t=Et.getBuilder();if(at.configurationInitialized){var n,o=Pt.context.storageManager.getAuthenticationToken(!0);if(o?o.isExpired()&&(n=_t.getByCode("authentication_session_expired")):n=_t.getByCode("authentication_session_missing"),void 0===n){var r=Et.getBuilder(),i=o.getAuthorizedResources();if(i&&0<i.length){for(var a=[],s=0,c=i.length;s<c;s++)a.push(i[s].getAuthorizedResourceID().toUpperCase());var u=Pt.context.decisionService.intersectPreflightResources(e.getResources(),a),d=r.setDecisions(u).build();l.onResponse(d)}else{var h,g,p=e.hasFeature(ct.LOCAL_CACHE);f.a.debug("[PREAUTHORIZE] Using local cache: "+p),p&&Pt.context.decisionService.isPreauthorizationCacheValid(e.getResources())?(h=Pt.context.decisionService.getAuthorizedResourcesFromPreauthorizationCache(),d=r.buildFromStringArray(h),l.onResponse(d)):(g=function(e,t){f.a.debug("[PREAUTHORIZE] Server call failed.");var n=Et.getBuilder();if(0===t)r=n.setStatus(_t.getByCode("network_error")).build(),l.onFailure(r);else{try{var o=JSON.parse(e),r=n.setStatus(o).build()}catch(e){f.a.error("[PREAUTHORIZE] Failed to parse server failure response!"),r=n.setStatus(_t.getByCode("server_response_format_unknown")).build()}l.onFailure(r)}},Pt.context.decisionService.preauthorize(e,function(e,t){if(f.a.debug("[PREAUTHORIZE] XHR Success: "+e+", "+t),200===t){var n,o=[],r=Et.getBuilder();if(e)try{var i=JSON.parse(e),a=[];if(i.hasOwnProperty("resources"))for(var s=0,c=i.resources;s<c.length;s++){var u=c[s];a.push(new ye(u.id,u.authorized,u.error)),o.push(u)}n=r.setDecisions(a).build()}catch(e){f.a.error("[PREAUTHORIZE] Failed to parse server response!"),n=r.setStatus(_t.getByCode("server_response_format_unknown")).build(),l.onFailure(n)}Pt.context.storageManager.setPreauthorizationCache(o),l.onResponse(n)}else g(e,t)},g))}}else f.a.warn("[PREAUTHORIZE] "+n.message+"."),T=t.setStatus(n).build(),l.onFailure(T)}else{f.a.error("[PREAUTHORIZE] Configuration not initialized.");var T=t.setStatus(_t.getByCode("requestor_not_configured")).build();l.onFailure(T)}}else f.a.error("[PREAUTHORIZE] Invalid parameters: [request="+e+"] [callback="+l+"]")},Pt.prototype.getMetadata=function(e,t){void 0===t&&(t=[]),at.configurationInitialized?(f.a.debug("Processing getMetadata(): ",e,t),Pt.context.storageManager.getAuthenticationToken()?Pt.context.userProfileService.getValue(e,t):Pt.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,e,null,null)):(f.a.debug("Put getMetadata() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.getMetadata,e,t)))},Pt.prototype.logout=function(){var e;at.configurationInitialized?(f.a.debug("Processing logout()"),Pt.context.userProfileService.authenticationGeneralCleanup(),Pt.context.decisionService.authorizationGeneralCleanup(),e=Pt.context.storageManager.getAuthenticationToken(),Pt.context.validRequestorId&&Pt.context.storageManager.ditchTokens(),Pt.context.logoutService.logout(e)):(f.a.debug("Put logout() in call queue"),Ue.pendingCallsQueue.push(new g(this,this.logout)))},Pt.prototype.bind=function(e,t){void 0===t&&(t=void 0),f.a.debug("bind("+e+", "+t+")"),Pt.context.callbackManager.bind(e,t)},Pt.prototype.unbind=function(e,t){void 0===t&&(t=void 0),f.a.debug("unbind("+e+", "+t+")"),Pt.context.callbackManager.unbind(e,t)},Pt.prototype.getStorageData=function(){Pt.context.callbackManager.callCallback(u.SEND_STORAGE_DATA_STATUS_CALLBACK,Pt.context.storageManager.getStorageData())},Rt([Ne],Pt.prototype,"setRequestor",null),Rt([Ne],Pt.prototype,"setSelectedProvider",null),Rt([Ne],Pt.prototype,"getSelectedProvider",null),Rt([Ne],Pt.prototype,"getProxyMVPD",null),Rt([Ne],Pt.prototype,"autoLogin",null),Rt([Ne],Pt.prototype,"getAuthentication",null),Rt([Ne],Pt.prototype,"checkAuthentication",null),Rt([Ne],Pt.prototype,"getAuthorization",null),Rt([Ne],Pt.prototype,"checkAuthorization",null),Rt([Ne],Pt.prototype,"checkPreauthorizedResources",null),Rt([Ne],Pt.prototype,"preauthorize",null),Rt([Ne],Pt.prototype,"getMetadata",null),Rt([Ne],Pt.prototype,"logout",null),Rt([Ne],Pt.prototype,"bind",null),Rt([Ne],Pt.prototype,"unbind",null),Rt([Ne],Pt.prototype,"getStorageData",null),Pt);function Pt(e){var t=this;this.completeAccessEnablerProxyLoading=function(){Pt.context=Ue.getInstance(),null!=t._scriptUrl?Pt.context.configureServiceProviderUrl(t._scriptUrl.host):Pt.context.configureServiceProviderUrl(null),Pt.context.storageManager.syncStorage().then(function(){f.a.debug("Initial storage sync complete!"),Pt.context.callbackManager.callCallback(u.ACCESS_ENABLER_LIBRARY_LOADED_STATUS_CALLBACK)})},this._softwareStatement=e,this._scriptUrl=new Ct(P.get(),null,!0),f.a.info("Version: 4.5.0-7aa412d "+(T.isDebug(this._scriptUrl)?"DEBUG":"RELEASE")),f.a.setLevel(T.isDebug(this._scriptUrl)?1:4),T.addGenericEventListener("message",function(e){return T.receiveMessageEventHandler(e,{PROXY_LOADED:t.completeAccessEnablerProxyLoading,LOGIN_COMPLETE:t.completeBackgroundLogin,LOGOUT_COMPLETE:t.completeBackgroundLogout,PASSIVE_AUTHN_COMPLETE:t.completePassiveLogin})}),this.loadAccessEnablerProxy()}var bt=i(2),Nt={PreauthorizeRequest:ht,PreauthorizeResponse:Et},Dt=(xt.prototype.loadAccessEnablerService=function(e){var o=Ot.getInstance(e),t=this;for(var n in o._api_methods)!function(n){o._api_methods.hasOwnProperty(n)&&(t[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o[n].apply(o,e)})}(n);this.version="4.5.0-7aa412d"},xt);function xt(e){var t=this;f.a.setPrefix("AccessEnabler.js");var n,o=new bt(P.get(),null,!0);i.p=o.protocol+"//"+o.host+o.pathname.replace("AccessEnabler.js",""),"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?this.loadAccessEnablerService(e):(f.a.warn("Non standards compliant browser! Loading polyfills."),(n=document.createElement("script")).src=i.p+"/polyfill.js",n.onload=function(){t.loadAccessEnablerService(e)},n.onerror=function(){f.a.error("Failed to load polyfills!"),t.loadAccessEnablerService(e)},document.head.appendChild(n))}}]);
//# sourceMappingURL=AccessEnabler.js.map